import{S as t,i as e,s as o,a as s,F as a,v as i,g as n,d,j as l,n as r,H as c,z as h,I as u,C as f,D as p,J as m,K as g,L as _,e as v,t as E,c as y,b as U,f as b,w as x,k as H,G as T,l as w,h as N,M as A,N as k}from"./client.ff85a803.js";function z(t){let e,o,a,i,r,c,h,u,f,p,m,g,_,z,C,B,D,L,O,R,F,G,J,K,M,P=t[0].id+"",S=t[0].test_code_id+"",V=I(t[3]).length>0,X=t[3]!=t[0].code&&$(t),q=V&&j(t);return{c(){e=v("h1"),o=E("Updating "),a=v("a"),i=E("solution "),r=E(P),h=E(" for "),u=v("a"),f=E("test "),p=E(S),g=s(),_=v("h4"),z=E("Code"),C=s(),X&&X.c(),B=s(),D=v("textarea"),L=s(),O=v("div"),q&&q.c(),R=s(),F=v("button"),G=E("update solution"),this.h()},l(t){e=y(t,"H1",{});var s=U(e);o=b(s,"Updating "),a=y(s,"A",{href:!0});var l=U(a);i=b(l,"solution "),r=b(l,P),l.forEach(n),h=b(s," for "),u=y(s,"A",{href:!0});var c=U(u);f=b(c,"test "),p=b(c,S),c.forEach(n),s.forEach(n),g=d(t),_=y(t,"H4",{style:!0});var m=U(_);z=b(m,"Code"),m.forEach(n),C=d(t),X&&X.l(t),B=d(t),D=y(t,"TEXTAREA",{style:!0}),U(D).forEach(n),L=d(t),O=y(t,"DIV",{});var v=U(O);q&&q.l(v),R=d(v),F=y(v,"BUTTON",{disabled:!0});var E=U(F);G=b(E,"update solution"),E.forEach(n),v.forEach(n),this.h()},h(){N(a,"href",c="/solution?id="+t[0].id),N(u,"href",m="/test?id="+t[0].test_code_id),x(_,"margin-top","20px"),x(D,"width","100%"),x(D,"height","200px"),F.disabled=J=0!=I(t[3]).length},m(s,n){l(s,e,n),H(e,o),H(e,a),H(a,i),H(a,r),H(e,h),H(e,u),H(u,f),H(u,p),l(s,g,n),l(s,_,n),H(_,z),l(s,C,n),X&&X.m(s,n),l(s,B,n),l(s,D,n),A(D,t[3]),l(s,L,n),l(s,O,n),q&&q.m(O,null),H(O,R),H(O,F),H(F,G),K||(M=[T(D,"input",t[6]),T(F,"click",t[5])],K=!0)},p(t,e){1&e&&P!==(P=t[0].id+"")&&w(r,P),1&e&&c!==(c="/solution?id="+t[0].id)&&N(a,"href",c),1&e&&S!==(S=t[0].test_code_id+"")&&w(p,S),1&e&&m!==(m="/test?id="+t[0].test_code_id)&&N(u,"href",m),t[3]!=t[0].code?X?X.p(t,e):(X=$(t),X.c(),X.m(B.parentNode,B)):X&&(X.d(1),X=null),8&e&&A(D,t[3]),8&e&&(V=I(t[3]).length>0),V?q?q.p(t,e):(q=j(t),q.c(),q.m(O,R)):q&&(q.d(1),q=null),8&e&&J!==(J=0!=I(t[3]).length)&&(F.disabled=J)},d(t){t&&n(e),t&&n(g),t&&n(_),t&&n(C),X&&X.d(t),t&&n(B),t&&n(D),t&&n(L),t&&n(O),q&&q.d(),K=!1,k(M)}}}function C(t){let e,o;return{c(){e=v("h1"),o=E("loading...")},l(t){e=y(t,"H1",{});var s=U(e);o=b(s,"loading..."),s.forEach(n)},m(t,s){l(t,e,s),H(e,o)},p:r,d(t){t&&n(e)}}}function $(t){let e,o,a,i,c,h,u;return{c(){e=v("button"),o=E("restore solution code"),a=s(),i=v("h4"),c=E("modified!"),this.h()},l(t){e=y(t,"BUTTON",{});var s=U(e);o=b(s,"restore solution code"),s.forEach(n),a=d(t),i=y(t,"H4",{style:!0});var l=U(i);c=b(l,"modified!"),l.forEach(n),this.h()},h(){x(i,"color","red")},m(s,n){l(s,e,n),H(e,o),l(s,a,n),l(s,i,n),H(i,c),h||(u=T(e,"click",t[4]),h=!0)},p:r,d(t){t&&n(e),t&&n(a),t&&n(i),h=!1,u()}}}function j(t){let e,o,s=I(t[3])+"";return{c(){e=v("h5"),o=E(s),this.h()},l(t){e=y(t,"H5",{style:!0});var a=U(e);o=b(a,s),a.forEach(n),this.h()},h(){x(e,"margin-top","20px"),x(e,"color","red")},m(t,s){l(t,e,s),H(e,o)},p(t,e){8&e&&s!==(s=I(t[3])+"")&&w(o,s)},d(t){t&&n(e)}}}function B(t){let e,o,c;function h(t,e){return t[1]?C:z}document.title=e="Updating solution "+t[0].test_code_id;let u=h(t),f=u(t);return{c(){o=s(),f.c(),c=a()},l(t){i('[data-svelte="svelte-zysfzi"]',document.head).forEach(n),o=d(t),f.l(t),c=a()},m(t,e){l(t,o,e),f.m(t,e),l(t,c,e)},p(t,[o]){1&o&&e!==(e="Updating solution "+t[0].test_code_id)&&(document.title=e),u===(u=h(t))&&f?f.p(t,o):(f.d(1),f=u(t),f&&(f.c(),f.m(c.parentNode,c)))},i:r,o:r,d(t){t&&n(o),f.d(t),t&&n(c)}}}function D(){return new URL(location).searchParams.get("id")}function I(t){return 0==t.length?"code is missing":t.length>8192?`code is too long: ${t.length} > 8192`:""}function L(t,e,o){let s,a=r,i=()=>(a(),a=c(v,t=>o(3,s=t)),v);t.$$.on_destroy.push(()=>a());let n=null,d=[],l=!0,v=null;function E(){v.set(d.code)}return i(),h(()=>{D();i(o(2,v=u(""))),n=f(),async function(){o(1,l=!0);let t=D(),e=await p(n,"solution/"+t);o(0,d=e.data),""==s&&E();o(1,l=!1)}()}),[d,l,v,s,E,async function(){200==(await m(n,"update_solution",{id:d.id,code:s})).status&&(v.set(""),g(),_("/test?id="+d.test_code_id+"&page=0"))},function(){s=this.value,v.set(s)}]}export default class extends t{constructor(t){super(),e(this,t,L,B,o,{})}}
