import{S as t,i as e,s,a as n,G as o,w as i,g as a,d as l,j as r,n as c,I as d,A as u,J as h,D as g,E as p,K as f,L as m,M as E,e as v,t as b,c as w,b as y,f as T,x,k as $,H,l as N,N as U,O as _}from"./client.064378b9.js";function A(t){let e,s,o,i,c,d,u,h,g,p,f,m,E,N,A,I,D,O,j,B,C,L,P,X=0!=R(t[5],t[6],t[7]).length,z=(t[5]!=t[0].title||t[6]!=t[0].descr||t[7]!=t[0].code)&&S(t),G=X&&k(t);return{c(){z&&z.c(),e=n(),s=v("h4"),o=b("Title"),i=n(),c=v("input"),d=n(),u=v("h4"),h=b("Description"),g=n(),p=v("textarea"),f=n(),m=v("h4"),E=b("Code"),N=n(),A=v("textarea"),I=n(),D=v("div"),G&&G.c(),O=n(),j=v("button"),B=b("update test"),this.h()},l(t){z&&z.l(t),e=l(t),s=w(t,"H4",{});var n=y(s);o=T(n,"Title"),n.forEach(a),i=l(t),c=w(t,"INPUT",{}),d=l(t),u=w(t,"H4",{style:!0});var r=y(u);h=T(r,"Description"),r.forEach(a),g=l(t),p=w(t,"TEXTAREA",{style:!0}),y(p).forEach(a),f=l(t),m=w(t,"H4",{style:!0});var v=y(m);E=T(v,"Code"),v.forEach(a),N=l(t),A=w(t,"TEXTAREA",{style:!0}),y(A).forEach(a),I=l(t),D=w(t,"DIV",{});var b=y(D);G&&G.l(b),O=l(b),j=w(b,"BUTTON",{disabled:!0});var x=y(j);B=T(x,"update test"),x.forEach(a),b.forEach(a),this.h()},h(){x(u,"margin-top","20px"),x(p,"width","100%"),x(p,"height","200px"),x(m,"margin-top","20px"),x(A,"width","100%"),x(A,"height","200px"),j.disabled=C=0!=R(t[5],t[6],t[7]).length},m(n,a){z&&z.m(n,a),r(n,e,a),r(n,s,a),$(s,o),r(n,i,a),r(n,c,a),U(c,t[5]),r(n,d,a),r(n,u,a),$(u,h),r(n,g,a),r(n,p,a),U(p,t[6]),r(n,f,a),r(n,m,a),$(m,E),r(n,N,a),r(n,A,a),U(A,t[7]),r(n,I,a),r(n,D,a),G&&G.m(D,null),$(D,O),$(D,j),$(j,B),L||(P=[H(c,"input",t[10]),H(p,"input",t[11]),H(A,"input",t[12]),H(j,"click",t[9])],L=!0)},p(t,s){t[5]!=t[0].title||t[6]!=t[0].descr||t[7]!=t[0].code?z?z.p(t,s):(z=S(t),z.c(),z.m(e.parentNode,e)):z&&(z.d(1),z=null),32&s&&c.value!==t[5]&&U(c,t[5]),64&s&&U(p,t[6]),128&s&&U(A,t[7]),224&s&&(X=0!=R(t[5],t[6],t[7]).length),X?G?G.p(t,s):(G=k(t),G.c(),G.m(D,O)):G&&(G.d(1),G=null),224&s&&C!==(C=0!=R(t[5],t[6],t[7]).length)&&(j.disabled=C)},d(t){z&&z.d(t),t&&a(e),t&&a(s),t&&a(i),t&&a(c),t&&a(d),t&&a(u),t&&a(g),t&&a(p),t&&a(f),t&&a(m),t&&a(N),t&&a(A),t&&a(I),t&&a(D),G&&G.d(),L=!1,_(P)}}}function I(t){let e,s;return{c(){e=v("h1"),s=b("loading...")},l(t){e=w(t,"H1",{});var n=y(e);s=T(n,"loading..."),n.forEach(a)},m(t,n){r(t,e,n),$(e,s)},p:c,d(t){t&&a(e)}}}function S(t){let e,s,o,i,d,u,h;return{c(){e=v("button"),s=b("restore original test"),o=n(),i=v("h4"),d=b("modified!"),this.h()},l(t){e=w(t,"BUTTON",{});var n=y(e);s=T(n,"restore original test"),n.forEach(a),o=l(t),i=w(t,"H4",{style:!0});var r=y(i);d=T(r,"modified!"),r.forEach(a),this.h()},h(){x(i,"color","red")},m(n,a){r(n,e,a),$(e,s),r(n,o,a),r(n,i,a),$(i,d),u||(h=H(e,"click",t[8]),u=!0)},p:c,d(t){t&&a(e),t&&a(o),t&&a(i),u=!1,h()}}}function k(t){let e,s,n=R(t[5],t[6],t[7])+"";return{c(){e=v("h5"),s=b(n),this.h()},l(t){e=w(t,"H5",{style:!0});var o=y(e);s=T(o,n),o.forEach(a),this.h()},h(){x(e,"margin-top","20px"),x(e,"color","red")},m(t,n){r(t,e,n),$(e,s)},p(t,e){224&e&&n!==(n=R(t[5],t[6],t[7])+"")&&N(s,n)},d(t){t&&a(e)}}}function D(t){let e,s,d;function u(t,e){return t[1]?I:A}document.title=e="Updating test "+t[0].id;let h=u(t),g=h(t);return{c(){s=n(),g.c(),d=o()},l(t){i('[data-svelte="svelte-1it3kzn"]',document.head).forEach(a),s=l(t),g.l(t),d=o()},m(t,e){r(t,s,e),g.m(t,e),r(t,d,e)},p(t,[s]){1&s&&e!==(e="Updating test "+t[0].id)&&(document.title=e),h===(h=u(t))&&g?g.p(t,s):(g.d(1),g=h(t),g&&(g.c(),g.m(d.parentNode,d)))},i:c,o:c,d(t){t&&a(s),g.d(t),t&&a(d)}}}function O(){new URL(location).searchParams.get("id");return 1}function R(t,e,s){return 0==t.length?"missing title":t.length>256?`title is too long: ${t.length} > 256`:0==e.length?"description is missing":e.length>2048?`description is too long: ${t.length} > 2048`:0==s.length?"code is missing":s.length>8192?`code is too long: ${t.length} > 8192`:""}function j(t,e,s){let n,o,i,a=c,l=()=>(a(),a=d($,t=>s(5,n=t)),$),r=c,v=()=>(r(),r=d(H,t=>s(6,o=t)),H),b=c,w=()=>(b(),b=d(N,t=>s(7,i=t)),N);t.$$.on_destroy.push(()=>a()),t.$$.on_destroy.push(()=>r()),t.$$.on_destroy.push(()=>b());let y=null,T=[],x=!0,$=null;l();let H=null;v();let N=null;function U(){$.set(T.title)}function _(){H.set(T.descr)}function A(){N.set(T.code)}return w(),u(()=>{O();window.localStorage||alert("your browser does not support localStorage!"),window.localStorage.setItem("utname_","123");window.localStorage.getItem("utname_");l(s(2,$=h(""))),$.subscribe(t=>console.log(t)),v(s(3,H=h(""))),H.subscribe(t=>console.log(t)),w(s(4,N=h(""))),N.subscribe(t=>console.log(t)),y=g(),async function(t){s(1,x=!0);let e=O(),a=await p(y,"test/"+e);s(0,T=a.data),""==n&&U();""==o&&_();""==i&&A();s(1,x=!1)}()}),[T,x,$,H,N,n,o,i,function(){U(),_(),A()},async function(){200==(await f(y,"update_test",{id:T.id,title:n,descr:o,code:i})).status&&($.set(""),H.set(""),N.set(""),m(),E("/test?id="+T.id+"&page=0"))},function(){n=this.value,$.set(n)},function(){o=this.value,H.set(o)},function(){i=this.value,N.set(i)}]}export default class extends t{constructor(t){super(),e(this,t,j,D,s,{})}}
