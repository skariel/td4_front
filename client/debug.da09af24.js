import{S as t,i as e,s,a as n,F as i,v as a,g as l,d as o,j as r,n as c,H as d,z as u,I as h,C as p,D as f,J as g,K as m,L as v,e as E,t as b,c as y,b as T,f as x,w as $,k as H,G as _,l as w,M as I,N}from"./client.2f7ddab8.js";function U(t){let e,s,i,a,c,d,u,h,p,f,g,m,v,w,U,k,S,C,j,z,B,L,O,P=0!=R(t[5],t[6],t[7]).length,X=(t[5]!=t[0].title||t[6]!=t[0].descr||t[7]!=t[0].code)&&A(t),F=P&&D(t);return{c(){X&&X.c(),e=n(),s=E("h4"),i=b("Title"),a=n(),c=E("input"),d=n(),u=E("h4"),h=b("Description"),p=n(),f=E("textarea"),g=n(),m=E("h4"),v=b("Code"),w=n(),U=E("textarea"),k=n(),S=E("div"),F&&F.c(),C=n(),j=E("button"),z=b("update test"),this.h()},l(t){X&&X.l(t),e=o(t),s=y(t,"H4",{});var n=T(s);i=x(n,"Title"),n.forEach(l),a=o(t),c=y(t,"INPUT",{}),d=o(t),u=y(t,"H4",{style:!0});var r=T(u);h=x(r,"Description"),r.forEach(l),p=o(t),f=y(t,"TEXTAREA",{style:!0}),T(f).forEach(l),g=o(t),m=y(t,"H4",{style:!0});var E=T(m);v=x(E,"Code"),E.forEach(l),w=o(t),U=y(t,"TEXTAREA",{style:!0}),T(U).forEach(l),k=o(t),S=y(t,"DIV",{});var b=T(S);F&&F.l(b),C=o(b),j=y(b,"BUTTON",{disabled:!0});var $=T(j);z=x($,"update test"),$.forEach(l),b.forEach(l),this.h()},h(){$(u,"margin-top","20px"),$(f,"width","100%"),$(f,"height","200px"),$(m,"margin-top","20px"),$(U,"width","100%"),$(U,"height","200px"),j.disabled=B=0!=R(t[5],t[6],t[7]).length},m(n,l){X&&X.m(n,l),r(n,e,l),r(n,s,l),H(s,i),r(n,a,l),r(n,c,l),I(c,t[5]),r(n,d,l),r(n,u,l),H(u,h),r(n,p,l),r(n,f,l),I(f,t[6]),r(n,g,l),r(n,m,l),H(m,v),r(n,w,l),r(n,U,l),I(U,t[7]),r(n,k,l),r(n,S,l),F&&F.m(S,null),H(S,C),H(S,j),H(j,z),L||(O=[_(c,"input",t[10]),_(f,"input",t[11]),_(U,"input",t[12]),_(j,"click",t[9])],L=!0)},p(t,s){t[5]!=t[0].title||t[6]!=t[0].descr||t[7]!=t[0].code?X?X.p(t,s):(X=A(t),X.c(),X.m(e.parentNode,e)):X&&(X.d(1),X=null),32&s&&c.value!==t[5]&&I(c,t[5]),64&s&&I(f,t[6]),128&s&&I(U,t[7]),224&s&&(P=0!=R(t[5],t[6],t[7]).length),P?F?F.p(t,s):(F=D(t),F.c(),F.m(S,C)):F&&(F.d(1),F=null),224&s&&B!==(B=0!=R(t[5],t[6],t[7]).length)&&(j.disabled=B)},d(t){X&&X.d(t),t&&l(e),t&&l(s),t&&l(a),t&&l(c),t&&l(d),t&&l(u),t&&l(p),t&&l(f),t&&l(g),t&&l(m),t&&l(w),t&&l(U),t&&l(k),t&&l(S),F&&F.d(),L=!1,N(O)}}}function k(t){let e,s;return{c(){e=E("h1"),s=b("loading...")},l(t){e=y(t,"H1",{});var n=T(e);s=x(n,"loading..."),n.forEach(l)},m(t,n){r(t,e,n),H(e,s)},p:c,d(t){t&&l(e)}}}function A(t){let e,s,i,a,d,u,h;return{c(){e=E("button"),s=b("restore original test"),i=n(),a=E("h4"),d=b("modified!"),this.h()},l(t){e=y(t,"BUTTON",{});var n=T(e);s=x(n,"restore original test"),n.forEach(l),i=o(t),a=y(t,"H4",{style:!0});var r=T(a);d=x(r,"modified!"),r.forEach(l),this.h()},h(){$(a,"color","red")},m(n,l){r(n,e,l),H(e,s),r(n,i,l),r(n,a,l),H(a,d),u||(h=_(e,"click",t[8]),u=!0)},p:c,d(t){t&&l(e),t&&l(i),t&&l(a),u=!1,h()}}}function D(t){let e,s,n=R(t[5],t[6],t[7])+"";return{c(){e=E("h5"),s=b(n),this.h()},l(t){e=y(t,"H5",{style:!0});var i=T(e);s=x(i,n),i.forEach(l),this.h()},h(){$(e,"margin-top","20px"),$(e,"color","red")},m(t,n){r(t,e,n),H(e,s)},p(t,e){224&e&&n!==(n=R(t[5],t[6],t[7])+"")&&w(s,n)},d(t){t&&l(e)}}}function S(t){let e,s,d;function u(t,e){return t[1]?k:U}document.title=e="Updating test "+t[0].id;let h=u(t),p=h(t);return{c(){s=n(),p.c(),d=i()},l(t){a('[data-svelte="svelte-1it3kzn"]',document.head).forEach(l),s=o(t),p.l(t),d=i()},m(t,e){r(t,s,e),p.m(t,e),r(t,d,e)},p(t,[s]){1&s&&e!==(e="Updating test "+t[0].id)&&(document.title=e),h===(h=u(t))&&p?p.p(t,s):(p.d(1),p=h(t),p&&(p.c(),p.m(d.parentNode,d)))},i:c,o:c,d(t){t&&l(s),p.d(t),t&&l(d)}}}function C(){new URL(location).searchParams.get("id");return 1}function R(t,e,s){return 0==t.length?"missing title":t.length>256?`title is too long: ${t.length} > 256`:0==e.length?"description is missing":e.length>2048?`description is too long: ${t.length} > 2048`:0==s.length?"code is missing":s.length>8192?`code is too long: ${t.length} > 8192`:""}function j(t,e,s){let n,i,a,l=c,o=()=>(l(),l=d(H,t=>s(5,n=t)),H),r=c,E=()=>(r(),r=d(_,t=>s(6,i=t)),_),b=c,y=()=>(b(),b=d(w,t=>s(7,a=t)),w);t.$$.on_destroy.push(()=>l()),t.$$.on_destroy.push(()=>r()),t.$$.on_destroy.push(()=>b());let T=null,x=[],$=!0,H=null;o();let _=null;E();let w=null;function I(){H.set(x.title)}function N(){_.set(x.descr)}function U(){w.set(x.code)}return y(),u(()=>{let t=C();o(s(2,H=h(""))),H.subscribe(e=>localStorage.setItem("utname_"+t,e)),E(s(3,_=h(""))),_.subscribe(e=>localStorage.setItem("utdescr_"+t,e)),y(s(4,w=h(""))),w.subscribe(e=>localStorage.setItem("utcode_"+t,e)),T=p(),async function(t){s(1,$=!0);let e=C(),l=await f(T,"test/"+e);s(0,x=l.data),""==n&&I();""==i&&N();""==a&&U();s(1,$=!1)}()}),[x,$,H,_,w,n,i,a,function(){I(),N(),U()},async function(){200==(await g(T,"update_test",{id:x.id,title:n,descr:i,code:a})).status&&(H.set(""),_.set(""),w.set(""),m(),v("/test?id="+x.id+"&page=0"))},function(){n=this.value,H.set(n)},function(){i=this.value,_.set(i)},function(){a=this.value,w.set(a)}]}export default class extends t{constructor(t){super(),e(this,t,j,S,s,{})}}
