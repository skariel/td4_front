import{S as t,i as e,s,e as a,t as i,c as n,b as o,f as l,g as c,w as r,j as d,k as h,l as u,a as g,v as f,d as m,H as p,I as v,n as E,J as b,K as T,L as x,A as I,D as y,E as S,M as w,N as H}from"./client.0a4ecb5f.js";function U(t){let e,s;return{c(){e=a("h4"),s=i("modified!"),this.h()},l(t){e=n(t,"H4",{style:!0});var a=o(e);s=l(a,"modified!"),a.forEach(c),this.h()},h(){r(e,"color","red")},m(t,a){d(t,e,a),h(e,s)},d(t){t&&c(e)}}}function A(t){let e,s,g=k(t[1],t[2],t[3])+"";return{c(){e=a("h5"),s=i(g),this.h()},l(t){e=n(t,"H5",{style:!0});var a=o(e);s=l(a,g),a.forEach(c),this.h()},h(){r(e,"margin-top","20px"),r(e,"color","red")},m(t,a){d(t,e,a),h(e,s)},p(t,e){14&e&&g!==(g=k(t[1],t[2],t[3])+"")&&u(s,g)},d(t){t&&c(e)}}}function N(t){let e,s,u,T,x,I,y,S,w,H,N,D,R,$,j,B,C,L,O,P,X,z,J,K,M,V,_,q,F=0!=k(t[1],t[2],t[3]).length;document.title=e="Updating test "+t[0].id;let G=(t[1]!=t[0].title||t[2]!=t[0].descr||t[3]!=t[0].code)&&U(),Q=F&&A(t);return{c(){s=g(),u=a("button"),T=i("restore original test"),x=g(),G&&G.c(),I=g(),y=a("h4"),S=i("Title"),w=g(),H=a("input"),N=g(),D=a("h4"),R=i("Description"),$=g(),j=a("textarea"),B=g(),C=a("h4"),L=i("Code"),O=g(),P=a("textarea"),X=g(),z=a("div"),Q&&Q.c(),J=g(),K=a("button"),M=i("update test"),this.h()},l(t){f('[data-svelte="svelte-1it3kzn"]',document.head).forEach(c),s=m(t),u=n(t,"BUTTON",{});var e=o(u);T=l(e,"restore original test"),e.forEach(c),x=m(t),G&&G.l(t),I=m(t),y=n(t,"H4",{});var a=o(y);S=l(a,"Title"),a.forEach(c),w=m(t),H=n(t,"INPUT",{}),N=m(t),D=n(t,"H4",{style:!0});var i=o(D);R=l(i,"Description"),i.forEach(c),$=m(t),j=n(t,"TEXTAREA",{style:!0}),o(j).forEach(c),B=m(t),C=n(t,"H4",{style:!0});var r=o(C);L=l(r,"Code"),r.forEach(c),O=m(t),P=n(t,"TEXTAREA",{style:!0}),o(P).forEach(c),X=m(t),z=n(t,"DIV",{});var d=o(z);Q&&Q.l(d),J=m(d),K=n(d,"BUTTON",{disabled:!0});var h=o(K);M=l(h,"update test"),h.forEach(c),d.forEach(c),this.h()},h(){r(D,"margin-top","20px"),r(j,"width","100%"),r(j,"height","200px"),r(C,"margin-top","20px"),r(P,"width","100%"),r(P,"height","200px"),K.disabled=V=0!=k(t[1],t[2],t[3]).length},m(e,a){d(e,s,a),d(e,u,a),h(u,T),d(e,x,a),G&&G.m(e,a),d(e,I,a),d(e,y,a),h(y,S),d(e,w,a),d(e,H,a),p(H,t[1]),d(e,N,a),d(e,D,a),h(D,R),d(e,$,a),d(e,j,a),p(j,t[2]),d(e,B,a),d(e,C,a),h(C,L),d(e,O,a),d(e,P,a),p(P,t[3]),d(e,X,a),d(e,z,a),Q&&Q.m(z,null),h(z,J),h(z,K),h(K,M),_||(q=[v(u,"click",t[7]),v(H,"input",t[9]),v(j,"input",t[10]),v(P,"input",t[11]),v(K,"click",t[8])],_=!0)},p(t,[s]){1&s&&e!==(e="Updating test "+t[0].id)&&(document.title=e),t[1]!=t[0].title||t[2]!=t[0].descr||t[3]!=t[0].code?G||(G=U(),G.c(),G.m(I.parentNode,I)):G&&(G.d(1),G=null),2&s&&H.value!==t[1]&&p(H,t[1]),4&s&&p(j,t[2]),8&s&&p(P,t[3]),14&s&&(F=0!=k(t[1],t[2],t[3]).length),F?Q?Q.p(t,s):(Q=A(t),Q.c(),Q.m(z,J)):Q&&(Q.d(1),Q=null),14&s&&V!==(V=0!=k(t[1],t[2],t[3]).length)&&(K.disabled=V)},i:E,o:E,d(t){t&&c(s),t&&c(u),t&&c(x),G&&G.d(t),t&&c(I),t&&c(y),t&&c(w),t&&c(H),t&&c(N),t&&c(D),t&&c($),t&&c(j),t&&c(B),t&&c(C),t&&c(O),t&&c(P),t&&c(X),t&&c(z),Q&&Q.d(),_=!1,b(q)}}}function k(t,e,s){return 0==t.length?"missing title":t.length>256?`title is too long: ${t.length} > 256`:0==e.length?"description is missing":e.length>2048?`description is too long: ${t.length} > 2048`:0==s.length?"code is missing":s.length>8192?`code is too long: ${t.length} > 8192`:""}function D(t,e,s){let a,i,n,o=null,l=[];const c=T(localStorage.getItem("utname")||"");x(t,c,t=>s(1,a=t)),c.subscribe(t=>localStorage.setItem("utname",t));const r=T(localStorage.getItem("utdescr")||"");x(t,r,t=>s(2,i=t)),r.subscribe(t=>localStorage.setItem("utdescr",t));const d=T(localStorage.getItem("utcode")||"");function h(){c.set(l.title)}function u(){r.set(l.descr)}function g(){d.set(l.code)}return x(t,d,t=>s(3,n=t)),d.subscribe(t=>localStorage.setItem("utcode",t)),I(()=>{o=y(),async function(t){let e=new URL(location).searchParams.get("id"),c=await S(o,"test/"+e);s(0,l=c.data),""==a&&h();""==i&&u();""==n&&g()}()}),[l,a,i,n,c,r,d,function(){h(),u(),g()},async function(){200==(await w(o,"update_test",{id:l.id,title:a,descr:i,code:n})).status&&(c.set(""),r.set(""),d.set(""),H("/test?id="+l.id+"&page=0"))},function(){a=this.value,c.set(a)},function(){i=this.value,r.set(i)},function(){n=this.value,d.set(n)}]}export default class extends t{constructor(t){super(),e(this,t,D,N,s,{})}}
