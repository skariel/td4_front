import{S as t,i as e,s,a as n,F as i,v as o,g as a,d as l,j as c,n as r,H as d,z as h,I as u,C as g,D as p,J as f,K as m,L as v,e as E,t as b,c as y,b as T,f as x,w as $,k as w,G as H,l as N,M as U,N as _}from"./client.3ed4972c.js";function k(t){let e,s,i,o,r,d,h,u,g,p,f,m,v,N,k,A,C,R,z,B,L,O,P,S=0!=j(t[5],t[6],t[7]).length,X=(t[5]!=t[0].title||t[6]!=t[0].descr||t[7]!=t[0].code)&&D(t),F=S&&I(t);return{c(){X&&X.c(),e=n(),s=E("h4"),i=b("Title"),o=n(),r=E("input"),d=n(),h=E("h4"),u=b("Description"),g=n(),p=E("textarea"),f=n(),m=E("h4"),v=b("Code"),N=n(),k=E("textarea"),A=n(),C=E("div"),F&&F.c(),R=n(),z=E("button"),B=b("update test"),this.h()},l(t){X&&X.l(t),e=l(t),s=y(t,"H4",{});var n=T(s);i=x(n,"Title"),n.forEach(a),o=l(t),r=y(t,"INPUT",{}),d=l(t),h=y(t,"H4",{style:!0});var c=T(h);u=x(c,"Description"),c.forEach(a),g=l(t),p=y(t,"TEXTAREA",{style:!0}),T(p).forEach(a),f=l(t),m=y(t,"H4",{style:!0});var E=T(m);v=x(E,"Code"),E.forEach(a),N=l(t),k=y(t,"TEXTAREA",{style:!0}),T(k).forEach(a),A=l(t),C=y(t,"DIV",{});var b=T(C);F&&F.l(b),R=l(b),z=y(b,"BUTTON",{disabled:!0});var $=T(z);B=x($,"update test"),$.forEach(a),b.forEach(a),this.h()},h(){$(h,"margin-top","20px"),$(p,"width","100%"),$(p,"height","200px"),$(m,"margin-top","20px"),$(k,"width","100%"),$(k,"height","200px"),z.disabled=L=0!=j(t[5],t[6],t[7]).length},m(n,a){X&&X.m(n,a),c(n,e,a),c(n,s,a),w(s,i),c(n,o,a),c(n,r,a),U(r,t[5]),c(n,d,a),c(n,h,a),w(h,u),c(n,g,a),c(n,p,a),U(p,t[6]),c(n,f,a),c(n,m,a),w(m,v),c(n,N,a),c(n,k,a),U(k,t[7]),c(n,A,a),c(n,C,a),F&&F.m(C,null),w(C,R),w(C,z),w(z,B),O||(P=[H(r,"input",t[10]),H(p,"input",t[11]),H(k,"input",t[12]),H(z,"click",t[9])],O=!0)},p(t,s){t[5]!=t[0].title||t[6]!=t[0].descr||t[7]!=t[0].code?X?X.p(t,s):(X=D(t),X.c(),X.m(e.parentNode,e)):X&&(X.d(1),X=null),32&s&&r.value!==t[5]&&U(r,t[5]),64&s&&U(p,t[6]),128&s&&U(k,t[7]),224&s&&(S=0!=j(t[5],t[6],t[7]).length),S?F?F.p(t,s):(F=I(t),F.c(),F.m(C,R)):F&&(F.d(1),F=null),224&s&&L!==(L=0!=j(t[5],t[6],t[7]).length)&&(z.disabled=L)},d(t){X&&X.d(t),t&&a(e),t&&a(s),t&&a(o),t&&a(r),t&&a(d),t&&a(h),t&&a(g),t&&a(p),t&&a(f),t&&a(m),t&&a(N),t&&a(k),t&&a(A),t&&a(C),F&&F.d(),O=!1,_(P)}}}function A(t){let e,s;return{c(){e=E("h1"),s=b("loading...")},l(t){e=y(t,"H1",{});var n=T(e);s=x(n,"loading..."),n.forEach(a)},m(t,n){c(t,e,n),w(e,s)},p:r,d(t){t&&a(e)}}}function D(t){let e,s,i,o,d,h,u;return{c(){e=E("button"),s=b("restore original test"),i=n(),o=E("h4"),d=b("modified!"),this.h()},l(t){e=y(t,"BUTTON",{});var n=T(e);s=x(n,"restore original test"),n.forEach(a),i=l(t),o=y(t,"H4",{style:!0});var c=T(o);d=x(c,"modified!"),c.forEach(a),this.h()},h(){$(o,"color","red")},m(n,a){c(n,e,a),w(e,s),c(n,i,a),c(n,o,a),w(o,d),h||(u=H(e,"click",t[8]),h=!0)},p:r,d(t){t&&a(e),t&&a(i),t&&a(o),h=!1,u()}}}function I(t){let e,s,n=j(t[5],t[6],t[7])+"";return{c(){e=E("h5"),s=b(n),this.h()},l(t){e=y(t,"H5",{style:!0});var i=T(e);s=x(i,n),i.forEach(a),this.h()},h(){$(e,"margin-top","20px"),$(e,"color","red")},m(t,n){c(t,e,n),w(e,s)},p(t,e){224&e&&n!==(n=j(t[5],t[6],t[7])+"")&&N(s,n)},d(t){t&&a(e)}}}function C(t){let e,s,d;function h(t,e){return t[1]?A:k}document.title=e="Updating test "+t[0].id;let u=h(t),g=u(t);return{c(){s=n(),g.c(),d=i()},l(t){o('[data-svelte="svelte-1it3kzn"]',document.head).forEach(a),s=l(t),g.l(t),d=i()},m(t,e){c(t,s,e),g.m(t,e),c(t,d,e)},p(t,[s]){1&s&&e!==(e="Updating test "+t[0].id)&&(document.title=e),u===(u=h(t))&&g?g.p(t,s):(g.d(1),g=u(t),g&&(g.c(),g.m(d.parentNode,d)))},i:r,o:r,d(t){t&&a(s),g.d(t),t&&a(d)}}}function R(){new URL(location).searchParams.get("id");return 1}function j(t,e,s){return 0==t.length?"missing title":t.length>256?`title is too long: ${t.length} > 256`:0==e.length?"description is missing":e.length>2048?`description is too long: ${t.length} > 2048`:0==s.length?"code is missing":s.length>8192?`code is too long: ${t.length} > 8192`:""}function z(t,e,s){let n,i,o,a=r,l=()=>(a(),a=d(w,t=>s(5,n=t)),w),c=r,E=()=>(c(),c=d(H,t=>s(6,i=t)),H),b=r,y=()=>(b(),b=d(N,t=>s(7,o=t)),N);t.$$.on_destroy.push(()=>a()),t.$$.on_destroy.push(()=>c()),t.$$.on_destroy.push(()=>b());let T=null,x=[],$=!0,w=null;l();let H=null;E();let N=null;function U(){w.set(x.title)}function _(){H.set(x.descr)}function k(){N.set(x.code)}return y(),h(()=>{R(),window.localStorage.getItem("utname_");l(s(2,w=u(""))),w.subscribe(t=>console.log(t)),E(s(3,H=u(""))),H.subscribe(t=>console.log(t)),y(s(4,N=u(""))),N.subscribe(t=>console.log(t)),T=g(),async function(t){s(1,$=!0);let e=R(),a=await p(T,"test/"+e);s(0,x=a.data),""==n&&U();""==i&&_();""==o&&k();s(1,$=!1)}()}),[x,$,w,H,N,n,i,o,function(){U(),_(),k()},async function(){200==(await f(T,"update_test",{id:x.id,title:n,descr:i,code:o})).status&&(w.set(""),H.set(""),N.set(""),m(),v("/test?id="+x.id+"&page=0"))},function(){n=this.value,w.set(n)},function(){i=this.value,H.set(i)},function(){o=this.value,N.set(o)}]}export default class extends t{constructor(t){super(),e(this,t,z,C,s,{})}}
