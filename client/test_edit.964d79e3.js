import{S as t,i as e,s,a,F as n,v as i,g as o,d as c,j as l,n as r,K as d,z as u,J as h,C as g,D as m,L as f,M as p,e as v,t as E,c as b,b as T,f as x,w as I,k as y,l as H,G as S,H as w,I as U}from"./client.57497393.js";function N(t){let e,s,n,i,r,d,u,h,g,m,f,p,H,N,k,C,$,j,z,B,L,O,P,X,F,G,J=0!=R(t[2],t[3],t[4]).length,K=(t[2]!=t[0].title||t[3]!=t[0].descr||t[4]!=t[0].code)&&A(),M=J&&D(t);return{c(){e=v("button"),s=E("restore original test"),n=a(),K&&K.c(),i=a(),r=v("h4"),d=E("Title"),u=a(),h=v("input"),g=a(),m=v("h4"),f=E("Description"),p=a(),H=v("textarea"),N=a(),k=v("h4"),C=E("Code"),$=a(),j=v("textarea"),z=a(),B=v("div"),M&&M.c(),L=a(),O=v("button"),P=E("update test"),this.h()},l(t){e=b(t,"BUTTON",{});var a=T(e);s=x(a,"restore original test"),a.forEach(o),n=c(t),K&&K.l(t),i=c(t),r=b(t,"H4",{});var l=T(r);d=x(l,"Title"),l.forEach(o),u=c(t),h=b(t,"INPUT",{}),g=c(t),m=b(t,"H4",{style:!0});var v=T(m);f=x(v,"Description"),v.forEach(o),p=c(t),H=b(t,"TEXTAREA",{style:!0}),T(H).forEach(o),N=c(t),k=b(t,"H4",{style:!0});var E=T(k);C=x(E,"Code"),E.forEach(o),$=c(t),j=b(t,"TEXTAREA",{style:!0}),T(j).forEach(o),z=c(t),B=b(t,"DIV",{});var I=T(B);M&&M.l(I),L=c(I),O=b(I,"BUTTON",{disabled:!0});var y=T(O);P=x(y,"update test"),y.forEach(o),I.forEach(o),this.h()},h(){I(m,"margin-top","20px"),I(H,"width","100%"),I(H,"height","200px"),I(k,"margin-top","20px"),I(j,"width","100%"),I(j,"height","200px"),O.disabled=X=0!=R(t[2],t[3],t[4]).length},m(a,o){l(a,e,o),y(e,s),l(a,n,o),K&&K.m(a,o),l(a,i,o),l(a,r,o),y(r,d),l(a,u,o),l(a,h,o),S(h,t[2]),l(a,g,o),l(a,m,o),y(m,f),l(a,p,o),l(a,H,o),S(H,t[3]),l(a,N,o),l(a,k,o),y(k,C),l(a,$,o),l(a,j,o),S(j,t[4]),l(a,z,o),l(a,B,o),M&&M.m(B,null),y(B,L),y(B,O),y(O,P),F||(G=[w(e,"click",t[5]),w(h,"input",t[7]),w(H,"input",t[8]),w(j,"input",t[9]),w(O,"click",t[6])],F=!0)},p(t,e){t[2]!=t[0].title||t[3]!=t[0].descr||t[4]!=t[0].code?K||(K=A(),K.c(),K.m(i.parentNode,i)):K&&(K.d(1),K=null),4&e&&h.value!==t[2]&&S(h,t[2]),8&e&&S(H,t[3]),16&e&&S(j,t[4]),28&e&&(J=0!=R(t[2],t[3],t[4]).length),J?M?M.p(t,e):(M=D(t),M.c(),M.m(B,L)):M&&(M.d(1),M=null),28&e&&X!==(X=0!=R(t[2],t[3],t[4]).length)&&(O.disabled=X)},d(t){t&&o(e),t&&o(n),K&&K.d(t),t&&o(i),t&&o(r),t&&o(u),t&&o(h),t&&o(g),t&&o(m),t&&o(p),t&&o(H),t&&o(N),t&&o(k),t&&o($),t&&o(j),t&&o(z),t&&o(B),M&&M.d(),F=!1,U(G)}}}function k(t){let e,s;return{c(){e=v("h1"),s=E("loading...")},l(t){e=b(t,"H1",{});var a=T(e);s=x(a,"loading..."),a.forEach(o)},m(t,a){l(t,e,a),y(e,s)},p:r,d(t){t&&o(e)}}}function A(t){let e,s;return{c(){e=v("h4"),s=E("modified!"),this.h()},l(t){e=b(t,"H4",{style:!0});var a=T(e);s=x(a,"modified!"),a.forEach(o),this.h()},h(){I(e,"color","red")},m(t,a){l(t,e,a),y(e,s)},d(t){t&&o(e)}}}function D(t){let e,s,a=R(t[2],t[3],t[4])+"";return{c(){e=v("h5"),s=E(a),this.h()},l(t){e=b(t,"H5",{style:!0});var n=T(e);s=x(n,a),n.forEach(o),this.h()},h(){I(e,"margin-top","20px"),I(e,"color","red")},m(t,a){l(t,e,a),y(e,s)},p(t,e){28&e&&a!==(a=R(t[2],t[3],t[4])+"")&&H(s,a)},d(t){t&&o(e)}}}function C(t){let e,s,d;function u(t,e){return t[1]?k:N}document.title=e="Updating test "+t[0].id;let h=u(t),g=h(t);return{c(){s=a(),g.c(),d=n()},l(t){i('[data-svelte="svelte-1it3kzn"]',document.head).forEach(o),s=c(t),g.l(t),d=n()},m(t,e){l(t,s,e),g.m(t,e),l(t,d,e)},p(t,[s]){1&s&&e!==(e="Updating test "+t[0].id)&&(document.title=e),h===(h=u(t))&&g?g.p(t,s):(g.d(1),g=h(t),g&&(g.c(),g.m(d.parentNode,d)))},i:r,o:r,d(t){t&&o(s),g.d(t),t&&o(d)}}}function R(t,e,s){return 0==t.length?"missing title":t.length>256?`title is too long: ${t.length} > 256`:0==e.length?"description is missing":e.length>2048?`description is too long: ${t.length} > 2048`:0==s.length?"code is missing":s.length>8192?`code is too long: ${t.length} > 8192`:""}function $(t,e,s){let a,n,i;d(t,utname,t=>s(2,a=t)),d(t,utdescr,t=>s(3,n=t)),d(t,utcode,t=>s(4,i=t));let o=null,c=[],l=!0;function r(){utname.set(c.title)}function v(){utdescr.set(c.descr)}function E(){utcode.set(c.code)}return u(()=>{h(localStorage.getItem("utname")||"").subscribe(t=>localStorage.setItem("utname",t));h(localStorage.getItem("utdescr")||"").subscribe(t=>localStorage.setItem("utdescr",t));h(localStorage.getItem("utcode")||"").subscribe(t=>localStorage.setItem("utcode",t)),o=g(),async function(t){s(1,l=!0);let e=new URL(location).searchParams.get("id"),d=await m(o,"test/"+e);s(0,c=d.data),""==a&&r();""==n&&v();""==i&&E();s(1,l=!1)}()}),[c,l,a,n,i,function(){r(),v(),E()},async function(){200==(await f(o,"update_test",{id:c.id,title:a,descr:n,code:i})).status&&(utname.set(""),utdescr.set(""),utcode.set(""),p("/test?id="+c.id+"&page=0"))},function(){a=this.value,utname.set(a)},function(){n=this.value,utdescr.set(n)},function(){i=this.value,utcode.set(i)}]}export default class extends t{constructor(t){super(),e(this,t,$,C,s,{})}}
