import{S as t,i as e,s as n,a as s,F as i,v as a,g as l,d as o,j as r,n as c,H as d,z as h,C as u,D as p,I as f,J as g,K as m,e as v,t as E,c as y,b as T,f as x,w as $,k as H,G as b,l as w,L as U,M as N}from"./client.0c722887.js";function k(t){let e,n,i,a,c,d,h,u,p,f,g,m,w,k,A,C,I,j,z,B,L,O,P,X=0!=R(t[5],t[6],t[7]).length,F=(t[5]!=t[0].title||t[6]!=t[0].descr||t[7]!=t[0].code)&&D(t),G=X&&_(t);return{c(){F&&F.c(),e=s(),n=v("h4"),i=E("Title"),a=s(),c=v("input"),d=s(),h=v("h4"),u=E("Description"),p=s(),f=v("textarea"),g=s(),m=v("h4"),w=E("Code"),k=s(),A=v("textarea"),C=s(),I=v("div"),G&&G.c(),j=s(),z=v("button"),B=E("update test"),this.h()},l(t){F&&F.l(t),e=o(t),n=y(t,"H4",{});var s=T(n);i=x(s,"Title"),s.forEach(l),a=o(t),c=y(t,"INPUT",{}),d=o(t),h=y(t,"H4",{style:!0});var r=T(h);u=x(r,"Description"),r.forEach(l),p=o(t),f=y(t,"TEXTAREA",{style:!0}),T(f).forEach(l),g=o(t),m=y(t,"H4",{style:!0});var v=T(m);w=x(v,"Code"),v.forEach(l),k=o(t),A=y(t,"TEXTAREA",{style:!0}),T(A).forEach(l),C=o(t),I=y(t,"DIV",{});var E=T(I);G&&G.l(E),j=o(E),z=y(E,"BUTTON",{disabled:!0});var $=T(z);B=x($,"update test"),$.forEach(l),E.forEach(l),this.h()},h(){$(h,"margin-top","20px"),$(f,"width","100%"),$(f,"height","200px"),$(m,"margin-top","20px"),$(A,"width","100%"),$(A,"height","200px"),z.disabled=L=0!=R(t[5],t[6],t[7]).length},m(s,l){F&&F.m(s,l),r(s,e,l),r(s,n,l),H(n,i),r(s,a,l),r(s,c,l),U(c,t[5]),r(s,d,l),r(s,h,l),H(h,u),r(s,p,l),r(s,f,l),U(f,t[6]),r(s,g,l),r(s,m,l),H(m,w),r(s,k,l),r(s,A,l),U(A,t[7]),r(s,C,l),r(s,I,l),G&&G.m(I,null),H(I,j),H(I,z),H(z,B),O||(P=[b(c,"input",t[10]),b(f,"input",t[11]),b(A,"input",t[12]),b(z,"click",t[9])],O=!0)},p(t,n){t[5]!=t[0].title||t[6]!=t[0].descr||t[7]!=t[0].code?F?F.p(t,n):(F=D(t),F.c(),F.m(e.parentNode,e)):F&&(F.d(1),F=null),32&n&&c.value!==t[5]&&U(c,t[5]),64&n&&U(f,t[6]),128&n&&U(A,t[7]),224&n&&(X=0!=R(t[5],t[6],t[7]).length),X?G?G.p(t,n):(G=_(t),G.c(),G.m(I,j)):G&&(G.d(1),G=null),224&n&&L!==(L=0!=R(t[5],t[6],t[7]).length)&&(z.disabled=L)},d(t){F&&F.d(t),t&&l(e),t&&l(n),t&&l(a),t&&l(c),t&&l(d),t&&l(h),t&&l(p),t&&l(f),t&&l(g),t&&l(m),t&&l(k),t&&l(A),t&&l(C),t&&l(I),G&&G.d(),O=!1,N(P)}}}function A(t){let e,n;return{c(){e=v("h1"),n=E("loading...")},l(t){e=y(t,"H1",{});var s=T(e);n=x(s,"loading..."),s.forEach(l)},m(t,s){r(t,e,s),H(e,n)},p:c,d(t){t&&l(e)}}}function D(t){let e,n,i,a,d,h,u;return{c(){e=v("button"),n=E("restore original test"),i=s(),a=v("h4"),d=E("modified!"),this.h()},l(t){e=y(t,"BUTTON",{});var s=T(e);n=x(s,"restore original test"),s.forEach(l),i=o(t),a=y(t,"H4",{style:!0});var r=T(a);d=x(r,"modified!"),r.forEach(l),this.h()},h(){$(a,"color","red")},m(s,l){r(s,e,l),H(e,n),r(s,i,l),r(s,a,l),H(a,d),h||(u=b(e,"click",t[8]),h=!0)},p:c,d(t){t&&l(e),t&&l(i),t&&l(a),h=!1,u()}}}function _(t){let e,n,s=R(t[5],t[6],t[7])+"";return{c(){e=v("h5"),n=E(s),this.h()},l(t){e=y(t,"H5",{style:!0});var i=T(e);n=x(i,s),i.forEach(l),this.h()},h(){$(e,"margin-top","20px"),$(e,"color","red")},m(t,s){r(t,e,s),H(e,n)},p(t,e){224&e&&s!==(s=R(t[5],t[6],t[7])+"")&&w(n,s)},d(t){t&&l(e)}}}function C(t){let e,n,d;function h(t,e){return t[1]?A:k}document.title=e="Updating test "+t[0].id;let u=h(t),p=u(t);return{c(){n=s(),p.c(),d=i()},l(t){a('[data-svelte="svelte-1it3kzn"]',document.head).forEach(l),n=o(t),p.l(t),d=i()},m(t,e){r(t,n,e),p.m(t,e),r(t,d,e)},p(t,[n]){1&n&&e!==(e="Updating test "+t[0].id)&&(document.title=e),u===(u=h(t))&&p?p.p(t,n):(p.d(1),p=u(t),p&&(p.c(),p.m(d.parentNode,d)))},i:c,o:c,d(t){t&&l(n),p.d(t),t&&l(d)}}}function I(){return new URL(location).searchParams.get("id")}function R(t,e,n){return 0==t.length?"missing title":t.length>256?`title is too long: ${t.length} > 256`:0==e.length?"description is missing":e.length>2048?`description is too long: ${t.length} > 2048`:0==n.length?"code is missing":n.length>8192?`code is too long: ${t.length} > 8192`:""}function j(t,e,n){let s,i,a,l=c,o=()=>(l(),l=d(H,t=>n(5,s=t)),H),r=c,v=()=>(r(),r=d(b,t=>n(6,i=t)),b),E=c,y=()=>(E(),E=d(w,t=>n(7,a=t)),w);t.$$.on_destroy.push(()=>l()),t.$$.on_destroy.push(()=>r()),t.$$.on_destroy.push(()=>E());let T=null,x=[],$=!0,H=null;o();let b=null;v();let w=null;function U(){H.set(x.title)}function N(){b.set(x.descr)}function k(){w.set(x.code)}return y(),h(()=>{I();o(n(2,H="")),v(n(3,b="")),y(n(4,w="")),T=u(),async function(t){n(1,$=!0);let e=I(),l=await p(T,"test/"+e);n(0,x=l.data),""==s&&U();""==i&&N();""==a&&k();n(1,$=!1)}()}),[x,$,H,b,w,s,i,a,function(){U(),N(),k()},async function(){200==(await f(T,"update_test",{id:x.id,title:s,descr:i,code:a})).status&&(H.set(""),b.set(""),w.set(""),g(),m("/test?id="+x.id+"&page=0"))},function(){s=this.value,H.set(s)},function(){i=this.value,b.set(i)},function(){a=this.value,w.set(a)}]}export default class extends t{constructor(t){super(),e(this,t,j,C,n,{})}}
