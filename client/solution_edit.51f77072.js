import{S as t,i as e,s as o,a as s,F as a,v as i,g as d,d as n,j as l,n as c,G as r,z as u,H as h,C as f,D as p,I as g,J as m,e as _,t as v,c as E,b,f as y,w as U,k as x,K as H,l as T,h as w,L as A,M as I}from"./client.e38457eb.js";function N(t){let e,o,a,i,c,r,u,h,f,p,g,m,N,k,S,j,B,D,L,O,R,F,G,J,K,M=t[0].id+"",P=t[0].test_code_id+"",V=$(t[3]).length>0,X=t[3]!=t[0].code&&z(t),q=V&&C(t);return{c(){e=_("h1"),o=v("Updating "),a=_("a"),i=v("solution "),c=v(M),u=v(" for "),h=_("a"),f=v("test "),p=v(P),m=s(),N=_("h4"),k=v("Code"),S=s(),X&&X.c(),j=s(),B=_("textarea"),D=s(),L=_("div"),q&&q.c(),O=s(),R=_("button"),F=v("update solution"),this.h()},l(t){e=E(t,"H1",{});var s=b(e);o=y(s,"Updating "),a=E(s,"A",{href:!0});var l=b(a);i=y(l,"solution "),c=y(l,M),l.forEach(d),u=y(s," for "),h=E(s,"A",{href:!0});var r=b(h);f=y(r,"test "),p=y(r,P),r.forEach(d),s.forEach(d),m=n(t),N=E(t,"H4",{style:!0});var g=b(N);k=y(g,"Code"),g.forEach(d),S=n(t),X&&X.l(t),j=n(t),B=E(t,"TEXTAREA",{style:!0}),b(B).forEach(d),D=n(t),L=E(t,"DIV",{});var _=b(L);q&&q.l(_),O=n(_),R=E(_,"BUTTON",{disabled:!0});var v=b(R);F=y(v,"update solution"),v.forEach(d),_.forEach(d),this.h()},h(){w(a,"href",r="/solution?id="+t[0].id),w(h,"href",g="/test?id="+t[0].test_code_id),U(N,"margin-top","20px"),U(B,"width","100%"),U(B,"height","200px"),R.disabled=G=0!=$(t[3]).length},m(s,d){l(s,e,d),x(e,o),x(e,a),x(a,i),x(a,c),x(e,u),x(e,h),x(h,f),x(h,p),l(s,m,d),l(s,N,d),x(N,k),l(s,S,d),X&&X.m(s,d),l(s,j,d),l(s,B,d),A(B,t[3]),l(s,D,d),l(s,L,d),q&&q.m(L,null),x(L,O),x(L,R),x(R,F),J||(K=[H(B,"input",t[6]),H(R,"click",t[5])],J=!0)},p(t,e){1&e&&M!==(M=t[0].id+"")&&T(c,M),1&e&&r!==(r="/solution?id="+t[0].id)&&w(a,"href",r),1&e&&P!==(P=t[0].test_code_id+"")&&T(p,P),1&e&&g!==(g="/test?id="+t[0].test_code_id)&&w(h,"href",g),t[3]!=t[0].code?X?X.p(t,e):(X=z(t),X.c(),X.m(j.parentNode,j)):X&&(X.d(1),X=null),8&e&&A(B,t[3]),8&e&&(V=$(t[3]).length>0),V?q?q.p(t,e):(q=C(t),q.c(),q.m(L,O)):q&&(q.d(1),q=null),8&e&&G!==(G=0!=$(t[3]).length)&&(R.disabled=G)},d(t){t&&d(e),t&&d(m),t&&d(N),t&&d(S),X&&X.d(t),t&&d(j),t&&d(B),t&&d(D),t&&d(L),q&&q.d(),J=!1,I(K)}}}function k(t){let e,o;return{c(){e=_("h1"),o=v("loading...")},l(t){e=E(t,"H1",{});var s=b(e);o=y(s,"loading..."),s.forEach(d)},m(t,s){l(t,e,s),x(e,o)},p:c,d(t){t&&d(e)}}}function z(t){let e,o,a,i,r,u,h;return{c(){e=_("button"),o=v("restore solution code"),a=s(),i=_("h4"),r=v("modified!"),this.h()},l(t){e=E(t,"BUTTON",{});var s=b(e);o=y(s,"restore solution code"),s.forEach(d),a=n(t),i=E(t,"H4",{style:!0});var l=b(i);r=y(l,"modified!"),l.forEach(d),this.h()},h(){U(i,"color","red")},m(s,d){l(s,e,d),x(e,o),l(s,a,d),l(s,i,d),x(i,r),u||(h=H(e,"click",t[4]),u=!0)},p:c,d(t){t&&d(e),t&&d(a),t&&d(i),u=!1,h()}}}function C(t){let e,o,s=$(t[3])+"";return{c(){e=_("h5"),o=v(s),this.h()},l(t){e=E(t,"H5",{style:!0});var a=b(e);o=y(a,s),a.forEach(d),this.h()},h(){U(e,"margin-top","20px"),U(e,"color","red")},m(t,s){l(t,e,s),x(e,o)},p(t,e){8&e&&s!==(s=$(t[3])+"")&&T(o,s)},d(t){t&&d(e)}}}function S(t){let e,o,r;function u(t,e){return t[1]?k:N}document.title=e="Updating solution "+t[0].test_code_id;let h=u(t),f=h(t);return{c(){o=s(),f.c(),r=a()},l(t){i('[data-svelte="svelte-zysfzi"]',document.head).forEach(d),o=n(t),f.l(t),r=a()},m(t,e){l(t,o,e),f.m(t,e),l(t,r,e)},p(t,[o]){1&o&&e!==(e="Updating solution "+t[0].test_code_id)&&(document.title=e),h===(h=u(t))&&f?f.p(t,o):(f.d(1),f=h(t),f&&(f.c(),f.m(r.parentNode,r)))},i:c,o:c,d(t){t&&d(o),f.d(t),t&&d(r)}}}function $(t){return 0==t.length?"code is missing":t.length>8192?`code is too long: ${t.length} > 8192`:""}function j(t,e,o){let s,a=c,i=()=>(a(),a=r(_,t=>o(3,s=t)),_);t.$$.on_destroy.push(()=>a());let d=null,n=[],l=!0,_=null;function v(){_.set(n.code)}return i(),u(()=>{i(o(2,_=h(localStorage.getItem("uscode")||""))),_.subscribe(t=>localStorage.setItem("uscode",t)),d=f(),async function(){o(1,l=!0);let t=new URL(location).searchParams.get("id"),e=await p(d,"solution/"+t);o(0,n=e.data),""==s&&v();o(1,l=!1)}()}),[n,l,_,s,v,async function(){200==(await g(d,"update_solution",{id:n.id,code:s})).status&&(_.set(""),m("/test?id="+n.test_code_id+"&page=0"))},function(){s=this.value,_.set(s)}]}export default class extends t{constructor(t){super(),e(this,t,j,S,o,{})}}
