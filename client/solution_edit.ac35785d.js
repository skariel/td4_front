import{S as t,i as e,s as o,a as s,F as a,v as i,g as d,d as n,j as l,n as c,G as r,z as u,H as h,C as f,D as p,I as g,J as m,e as _,t as v,c as E,b,f as y,w as U,k as x,l as H,h as T,K as w,L as A,M as I}from"./client.f46bf920.js";function N(t){let e,o,a,i,c,r,u,h,f,p,g,m,N,k,S,j,B,D,L,O,R,F,G,J,K,M,P,V,X=t[0].id+"",q=t[0].test_code_id+"",Q=$(t[3]).length>0,W=t[3]!=t[0].code&&z(),Y=Q&&C(t);return{c(){e=_("h1"),o=v("Updating "),a=_("a"),i=v("solution "),c=v(X),u=v(" for "),h=_("a"),f=v("test "),p=v(q),m=s(),N=_("h4"),k=v("Code"),S=s(),j=_("button"),B=v("restore solution code"),D=s(),W&&W.c(),L=s(),O=_("textarea"),R=s(),F=_("div"),Y&&Y.c(),G=s(),J=_("button"),K=v("update solution"),this.h()},l(t){e=E(t,"H1",{});var s=b(e);o=y(s,"Updating "),a=E(s,"A",{href:!0});var l=b(a);i=y(l,"solution "),c=y(l,X),l.forEach(d),u=y(s," for "),h=E(s,"A",{href:!0});var r=b(h);f=y(r,"test "),p=y(r,q),r.forEach(d),s.forEach(d),m=n(t),N=E(t,"H4",{style:!0});var g=b(N);k=y(g,"Code"),g.forEach(d),S=n(t),j=E(t,"BUTTON",{});var _=b(j);B=y(_,"restore solution code"),_.forEach(d),D=n(t),W&&W.l(t),L=n(t),O=E(t,"TEXTAREA",{style:!0}),b(O).forEach(d),R=n(t),F=E(t,"DIV",{});var v=b(F);Y&&Y.l(v),G=n(v),J=E(v,"BUTTON",{disabled:!0});var U=b(J);K=y(U,"update solution"),U.forEach(d),v.forEach(d),this.h()},h(){T(a,"href",r="/solution?id="+t[0].id),T(h,"href",g="/test?id="+t[0].test_code_id),U(N,"margin-top","20px"),U(O,"width","100%"),U(O,"height","200px"),J.disabled=M=0!=$(t[3]).length},m(s,d){l(s,e,d),x(e,o),x(e,a),x(a,i),x(a,c),x(e,u),x(e,h),x(h,f),x(h,p),l(s,m,d),l(s,N,d),x(N,k),l(s,S,d),l(s,j,d),x(j,B),l(s,D,d),W&&W.m(s,d),l(s,L,d),l(s,O,d),w(O,t[3]),l(s,R,d),l(s,F,d),Y&&Y.m(F,null),x(F,G),x(F,J),x(J,K),P||(V=[A(j,"click",t[4]),A(O,"input",t[6]),A(J,"click",t[5])],P=!0)},p(t,e){1&e&&X!==(X=t[0].id+"")&&H(c,X),1&e&&r!==(r="/solution?id="+t[0].id)&&T(a,"href",r),1&e&&q!==(q=t[0].test_code_id+"")&&H(p,q),1&e&&g!==(g="/test?id="+t[0].test_code_id)&&T(h,"href",g),t[3]!=t[0].code?W||(W=z(),W.c(),W.m(L.parentNode,L)):W&&(W.d(1),W=null),8&e&&w(O,t[3]),8&e&&(Q=$(t[3]).length>0),Q?Y?Y.p(t,e):(Y=C(t),Y.c(),Y.m(F,G)):Y&&(Y.d(1),Y=null),8&e&&M!==(M=0!=$(t[3]).length)&&(J.disabled=M)},d(t){t&&d(e),t&&d(m),t&&d(N),t&&d(S),t&&d(j),t&&d(D),W&&W.d(t),t&&d(L),t&&d(O),t&&d(R),t&&d(F),Y&&Y.d(),P=!1,I(V)}}}function k(t){let e,o;return{c(){e=_("h1"),o=v("loading...")},l(t){e=E(t,"H1",{});var s=b(e);o=y(s,"loading..."),s.forEach(d)},m(t,s){l(t,e,s),x(e,o)},p:c,d(t){t&&d(e)}}}function z(t){let e,o;return{c(){e=_("h4"),o=v("modified!"),this.h()},l(t){e=E(t,"H4",{style:!0});var s=b(e);o=y(s,"modified!"),s.forEach(d),this.h()},h(){U(e,"color","red")},m(t,s){l(t,e,s),x(e,o)},d(t){t&&d(e)}}}function C(t){let e,o,s=$(t[3])+"";return{c(){e=_("h5"),o=v(s),this.h()},l(t){e=E(t,"H5",{style:!0});var a=b(e);o=y(a,s),a.forEach(d),this.h()},h(){U(e,"margin-top","20px"),U(e,"color","red")},m(t,s){l(t,e,s),x(e,o)},p(t,e){8&e&&s!==(s=$(t[3])+"")&&H(o,s)},d(t){t&&d(e)}}}function S(t){let e,o,r;function u(t,e){return t[1]?k:N}document.title=e="Updating solution "+t[0].test_code_id;let h=u(t),f=h(t);return{c(){o=s(),f.c(),r=a()},l(t){i('[data-svelte="svelte-zysfzi"]',document.head).forEach(d),o=n(t),f.l(t),r=a()},m(t,e){l(t,o,e),f.m(t,e),l(t,r,e)},p(t,[o]){1&o&&e!==(e="Updating solution "+t[0].test_code_id)&&(document.title=e),h===(h=u(t))&&f?f.p(t,o):(f.d(1),f=h(t),f&&(f.c(),f.m(r.parentNode,r)))},i:c,o:c,d(t){t&&d(o),f.d(t),t&&d(r)}}}function $(t){return 0==t.length?"code is missing":t.length>8192?`code is too long: ${t.length} > 8192`:""}function j(t,e,o){let s,a=c,i=()=>(a(),a=r(_,t=>o(3,s=t)),_);t.$$.on_destroy.push(()=>a());let d=null,n=[],l=!0,_=null;function v(){_.set(n.code)}return i(),u(()=>{i(o(2,_=h(localStorage.getItem("uscode")||""))),_.subscribe(t=>localStorage.setItem("uscode",t)),d=f(),async function(){o(1,l=!0);let t=new URL(location).searchParams.get("id"),e=await p(d,"solution/"+t);o(0,n=e.data),""==s&&v();o(1,l=!1)}()}),[n,l,_,s,v,async function(){200==(await g(d,"update_solution",{id:n.id,code:s})).status&&(_.set(""),m("/test?id="+n.test_code_id+"&page=0"))},function(){s=this.value,_.set(s)}]}export default class extends t{constructor(t){super(),e(this,t,j,S,o,{})}}
