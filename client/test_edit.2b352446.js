import{S as t,i as e,s,e as a,t as i,c as n,b as o,f as l,g as c,w as r,j as d,k as h,l as u,a as g,v as f,d as m,G as p,H as v,n as E,I as b,J as T,K as x,z as I,C as y,D as S,L as w,M as H}from"./client.7f65b621.js";function U(t){let e,s;return{c(){e=a("h4"),s=i("modified!"),this.h()},l(t){e=n(t,"H4",{style:!0});var a=o(e);s=l(a,"modified!"),a.forEach(c),this.h()},h(){r(e,"color","red")},m(t,a){d(t,e,a),h(e,s)},d(t){t&&c(e)}}}function k(t){let e,s,g=D(t[1],t[2],t[3])+"";return{c(){e=a("h5"),s=i(g),this.h()},l(t){e=n(t,"H5",{style:!0});var a=o(e);s=l(a,g),a.forEach(c),this.h()},h(){r(e,"margin-top","20px"),r(e,"color","red")},m(t,a){d(t,e,a),h(e,s)},p(t,e){14&e&&g!==(g=D(t[1],t[2],t[3])+"")&&u(s,g)},d(t){t&&c(e)}}}function A(t){let e,s,u,T,x,I,y,S,w,H,A,N,C,R,$,j,z,B,L,O,P,X,G,J,K,M,V,_,q=0!=D(t[1],t[2],t[3]).length;document.title=e="Updating test "+t[0].id;let F=(t[1]!=t[0].title||t[2]!=t[0].descr||t[3]!=t[0].code)&&U(),Q=q&&k(t);return{c(){s=g(),u=a("button"),T=i("restore original test"),x=g(),F&&F.c(),I=g(),y=a("h4"),S=i("Title"),w=g(),H=a("input"),A=g(),N=a("h4"),C=i("Description"),R=g(),$=a("textarea"),j=g(),z=a("h4"),B=i("Code"),L=g(),O=a("textarea"),P=g(),X=a("div"),Q&&Q.c(),G=g(),J=a("button"),K=i("update test"),this.h()},l(t){f('[data-svelte="svelte-1it3kzn"]',document.head).forEach(c),s=m(t),u=n(t,"BUTTON",{});var e=o(u);T=l(e,"restore original test"),e.forEach(c),x=m(t),F&&F.l(t),I=m(t),y=n(t,"H4",{});var a=o(y);S=l(a,"Title"),a.forEach(c),w=m(t),H=n(t,"INPUT",{}),A=m(t),N=n(t,"H4",{style:!0});var i=o(N);C=l(i,"Description"),i.forEach(c),R=m(t),$=n(t,"TEXTAREA",{style:!0}),o($).forEach(c),j=m(t),z=n(t,"H4",{style:!0});var r=o(z);B=l(r,"Code"),r.forEach(c),L=m(t),O=n(t,"TEXTAREA",{style:!0}),o(O).forEach(c),P=m(t),X=n(t,"DIV",{});var d=o(X);Q&&Q.l(d),G=m(d),J=n(d,"BUTTON",{disabled:!0});var h=o(J);K=l(h,"update test"),h.forEach(c),d.forEach(c),this.h()},h(){r(N,"margin-top","20px"),r($,"width","100%"),r($,"height","200px"),r(z,"margin-top","20px"),r(O,"width","100%"),r(O,"height","200px"),J.disabled=M=0!=D(t[1],t[2],t[3]).length},m(e,a){d(e,s,a),d(e,u,a),h(u,T),d(e,x,a),F&&F.m(e,a),d(e,I,a),d(e,y,a),h(y,S),d(e,w,a),d(e,H,a),p(H,t[1]),d(e,A,a),d(e,N,a),h(N,C),d(e,R,a),d(e,$,a),p($,t[2]),d(e,j,a),d(e,z,a),h(z,B),d(e,L,a),d(e,O,a),p(O,t[3]),d(e,P,a),d(e,X,a),Q&&Q.m(X,null),h(X,G),h(X,J),h(J,K),V||(_=[v(u,"click",t[7]),v(H,"input",t[9]),v($,"input",t[10]),v(O,"input",t[11]),v(J,"click",t[8])],V=!0)},p(t,[s]){1&s&&e!==(e="Updating test "+t[0].id)&&(document.title=e),t[1]!=t[0].title||t[2]!=t[0].descr||t[3]!=t[0].code?F||(F=U(),F.c(),F.m(I.parentNode,I)):F&&(F.d(1),F=null),2&s&&H.value!==t[1]&&p(H,t[1]),4&s&&p($,t[2]),8&s&&p(O,t[3]),14&s&&(q=0!=D(t[1],t[2],t[3]).length),q?Q?Q.p(t,s):(Q=k(t),Q.c(),Q.m(X,G)):Q&&(Q.d(1),Q=null),14&s&&M!==(M=0!=D(t[1],t[2],t[3]).length)&&(J.disabled=M)},i:E,o:E,d(t){t&&c(s),t&&c(u),t&&c(x),F&&F.d(t),t&&c(I),t&&c(y),t&&c(w),t&&c(H),t&&c(A),t&&c(N),t&&c(R),t&&c($),t&&c(j),t&&c(z),t&&c(L),t&&c(O),t&&c(P),t&&c(X),Q&&Q.d(),V=!1,b(_)}}}function D(t,e,s){return 0==t.length?"missing title":t.length>256?`title is too long: ${t.length} > 256`:0==e.length?"description is missing":e.length>2048?`description is too long: ${t.length} > 2048`:0==s.length?"code is missing":s.length>8192?`code is too long: ${t.length} > 8192`:""}function N(t,e,s){let a,i,n,o=null,l=[];const c=T(localStorage.getItem("utname")||"");x(t,c,t=>s(1,a=t)),c.subscribe(t=>localStorage.setItem("utname",t));const r=T(localStorage.getItem("utdescr")||"");x(t,r,t=>s(2,i=t)),r.subscribe(t=>localStorage.setItem("utdescr",t));const d=T(localStorage.getItem("utcode")||"");function h(){c.set(l.title)}function u(){r.set(l.descr)}function g(){d.set(l.code)}return x(t,d,t=>s(3,n=t)),d.subscribe(t=>localStorage.setItem("utcode",t)),I(()=>{o=y(),async function(t){let e=new URL(location).searchParams.get("id"),c=await S(o,"test/"+e);s(0,l=c.data),""==a&&h();""==i&&u();""==n&&g()}()}),[l,a,i,n,c,r,d,function(){h(),u(),g()},async function(){200==(await w(o,"update_test",{id:l.id,title:a,descr:i,code:n})).status&&(c.set(""),r.set(""),d.set(""),H("/test?id="+l.id+"&page=0"))},function(){a=this.value,c.set(a)},function(){i=this.value,r.set(i)},function(){n=this.value,d.set(n)}]}export default class extends t{constructor(t){super(),e(this,t,N,A,s,{})}}
