import{S as t,i as e,s,a,F as i,v as n,g as o,d as l,j as c,n as r,J as d,K as h,z as u,C as g,D as f,L as m,M as p,e as v,t as E,c as b,b as T,f as x,w as I,k as y,l as H,G as S,H as w,I as U}from"./client.da359027.js";function N(t){let e,s,i,n,r,d,h,u,g,f,m,p,H,N,k,C,$,j,z,B,L,O,P,X,F,G,J=0!=R(t[2],t[3],t[4]).length,K=(t[2]!=t[0].title||t[3]!=t[0].descr||t[4]!=t[0].code)&&A(),M=J&&D(t);return{c(){e=v("button"),s=E("restore original test"),i=a(),K&&K.c(),n=a(),r=v("h4"),d=E("Title"),h=a(),u=v("input"),g=a(),f=v("h4"),m=E("Description"),p=a(),H=v("textarea"),N=a(),k=v("h4"),C=E("Code"),$=a(),j=v("textarea"),z=a(),B=v("div"),M&&M.c(),L=a(),O=v("button"),P=E("update test"),this.h()},l(t){e=b(t,"BUTTON",{});var a=T(e);s=x(a,"restore original test"),a.forEach(o),i=l(t),K&&K.l(t),n=l(t),r=b(t,"H4",{});var c=T(r);d=x(c,"Title"),c.forEach(o),h=l(t),u=b(t,"INPUT",{}),g=l(t),f=b(t,"H4",{style:!0});var v=T(f);m=x(v,"Description"),v.forEach(o),p=l(t),H=b(t,"TEXTAREA",{style:!0}),T(H).forEach(o),N=l(t),k=b(t,"H4",{style:!0});var E=T(k);C=x(E,"Code"),E.forEach(o),$=l(t),j=b(t,"TEXTAREA",{style:!0}),T(j).forEach(o),z=l(t),B=b(t,"DIV",{});var I=T(B);M&&M.l(I),L=l(I),O=b(I,"BUTTON",{disabled:!0});var y=T(O);P=x(y,"update test"),y.forEach(o),I.forEach(o),this.h()},h(){I(f,"margin-top","20px"),I(H,"width","100%"),I(H,"height","200px"),I(k,"margin-top","20px"),I(j,"width","100%"),I(j,"height","200px"),O.disabled=X=0!=R(t[2],t[3],t[4]).length},m(a,o){c(a,e,o),y(e,s),c(a,i,o),K&&K.m(a,o),c(a,n,o),c(a,r,o),y(r,d),c(a,h,o),c(a,u,o),S(u,t[2]),c(a,g,o),c(a,f,o),y(f,m),c(a,p,o),c(a,H,o),S(H,t[3]),c(a,N,o),c(a,k,o),y(k,C),c(a,$,o),c(a,j,o),S(j,t[4]),c(a,z,o),c(a,B,o),M&&M.m(B,null),y(B,L),y(B,O),y(O,P),F||(G=[w(e,"click",t[8]),w(u,"input",t[10]),w(H,"input",t[11]),w(j,"input",t[12]),w(O,"click",t[9])],F=!0)},p(t,e){t[2]!=t[0].title||t[3]!=t[0].descr||t[4]!=t[0].code?K||(K=A(),K.c(),K.m(n.parentNode,n)):K&&(K.d(1),K=null),4&e&&u.value!==t[2]&&S(u,t[2]),8&e&&S(H,t[3]),16&e&&S(j,t[4]),28&e&&(J=0!=R(t[2],t[3],t[4]).length),J?M?M.p(t,e):(M=D(t),M.c(),M.m(B,L)):M&&(M.d(1),M=null),28&e&&X!==(X=0!=R(t[2],t[3],t[4]).length)&&(O.disabled=X)},d(t){t&&o(e),t&&o(i),K&&K.d(t),t&&o(n),t&&o(r),t&&o(h),t&&o(u),t&&o(g),t&&o(f),t&&o(p),t&&o(H),t&&o(N),t&&o(k),t&&o($),t&&o(j),t&&o(z),t&&o(B),M&&M.d(),F=!1,U(G)}}}function k(t){let e,s;return{c(){e=v("h1"),s=E("loading...")},l(t){e=b(t,"H1",{});var a=T(e);s=x(a,"loading..."),a.forEach(o)},m(t,a){c(t,e,a),y(e,s)},p:r,d(t){t&&o(e)}}}function A(t){let e,s;return{c(){e=v("h4"),s=E("modified!"),this.h()},l(t){e=b(t,"H4",{style:!0});var a=T(e);s=x(a,"modified!"),a.forEach(o),this.h()},h(){I(e,"color","red")},m(t,a){c(t,e,a),y(e,s)},d(t){t&&o(e)}}}function D(t){let e,s,a=R(t[2],t[3],t[4])+"";return{c(){e=v("h5"),s=E(a),this.h()},l(t){e=b(t,"H5",{style:!0});var i=T(e);s=x(i,a),i.forEach(o),this.h()},h(){I(e,"margin-top","20px"),I(e,"color","red")},m(t,a){c(t,e,a),y(e,s)},p(t,e){28&e&&a!==(a=R(t[2],t[3],t[4])+"")&&H(s,a)},d(t){t&&o(e)}}}function C(t){let e,s,d;function h(t,e){return t[1]?k:N}document.title=e="Updating test "+t[0].id;let u=h(t),g=u(t);return{c(){s=a(),g.c(),d=i()},l(t){n('[data-svelte="svelte-1it3kzn"]',document.head).forEach(o),s=l(t),g.l(t),d=i()},m(t,e){c(t,s,e),g.m(t,e),c(t,d,e)},p(t,[s]){1&s&&e!==(e="Updating test "+t[0].id)&&(document.title=e),u===(u=h(t))&&g?g.p(t,s):(g.d(1),g=u(t),g&&(g.c(),g.m(d.parentNode,d)))},i:r,o:r,d(t){t&&o(s),g.d(t),t&&o(d)}}}function R(t,e,s){return 0==t.length?"missing title":t.length>256?`title is too long: ${t.length} > 256`:0==e.length?"description is missing":e.length>2048?`description is too long: ${t.length} > 2048`:0==s.length?"code is missing":s.length>8192?`code is too long: ${t.length} > 8192`:""}function $(t,e,s){let a,i,n,o=null,l=[],c=!0;const r=d(localStorage.getItem("utname")||"");h(t,r,t=>s(2,a=t)),r.subscribe(t=>localStorage.setItem("utname",t));const v=d(localStorage.getItem("utdescr")||"");h(t,v,t=>s(3,i=t)),v.subscribe(t=>localStorage.setItem("utdescr",t));const E=d(localStorage.getItem("utcode")||"");function b(){r.set(l.title)}function T(){v.set(l.descr)}function x(){E.set(l.code)}return h(t,E,t=>s(4,n=t)),E.subscribe(t=>localStorage.setItem("utcode",t)),u(()=>{o=g(),async function(t){s(1,c=!0);let e=new URL(location).searchParams.get("id"),r=await f(o,"test/"+e);s(0,l=r.data),""==a&&b();""==i&&T();""==n&&x();s(1,c=!1)}()}),[l,c,a,i,n,r,v,E,function(){b(),T(),x()},async function(){200==(await m(o,"update_test",{id:l.id,title:a,descr:i,code:n})).status&&(r.set(""),v.set(""),E.set(""),p("/test?id="+l.id+"&page=0"))},function(){a=this.value,r.set(a)},function(){i=this.value,v.set(i)},function(){n=this.value,E.set(n)}]}export default class extends t{constructor(t){super(),e(this,t,$,C,s,{})}}
