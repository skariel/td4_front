import{S as t,i as e,s,e as o,t as a,c as i,b as d,f as n,g as c,w as l,j as r,k as h,l as u,a as f,v as g,d as p,h as m,H as _,I as v,n as E,J as b,K as y,L as U,A as x,D as T,E as w,M as A,N as H}from"./client.0a4ecb5f.js";function I(t){let e,s;return{c(){e=o("h4"),s=a("modified!"),this.h()},l(t){e=i(t,"H4",{style:!0});var o=d(e);s=n(o,"modified!"),o.forEach(c),this.h()},h(){l(e,"color","red")},m(t,o){r(t,e,o),h(e,s)},d(t){t&&c(e)}}}function N(t){let e,s,f=S(t[1])+"";return{c(){e=o("h5"),s=a(f),this.h()},l(t){e=i(t,"H5",{style:!0});var o=d(e);s=n(o,f),o.forEach(c),this.h()},h(){l(e,"margin-top","20px"),l(e,"color","red")},m(t,o){r(t,e,o),h(e,s)},p(t,e){2&e&&f!==(f=S(t[1])+"")&&u(s,f)},d(t){t&&c(e)}}}function k(t){let e,s,y,U,x,T,w,A,H,k,j,z,B,C,D,L,O,R,J,K,M,P,V,X,$,q,F,G,Q,W,Y=t[0].id+"",Z=t[0].test_code_id+"",tt=S(t[1]).length>0;document.title=e="Updating solution "+t[0].test_code_id;let et=t[1]!=t[0].code&&I(),st=tt&&N(t);return{c(){s=f(),y=o("h1"),U=a("Updating "),x=o("a"),T=a("solution "),w=a(Y),H=a(" for "),k=o("a"),j=a("test "),z=a(Z),C=f(),D=o("h4"),L=a("Code"),O=f(),R=o("button"),J=a("restore solution code"),K=f(),et&&et.c(),M=f(),P=o("textarea"),V=f(),X=o("div"),st&&st.c(),$=f(),q=o("button"),F=a("update solution"),this.h()},l(t){g('[data-svelte="svelte-zysfzi"]',document.head).forEach(c),s=p(t),y=i(t,"H1",{});var e=d(y);U=n(e,"Updating "),x=i(e,"A",{href:!0});var o=d(x);T=n(o,"solution "),w=n(o,Y),o.forEach(c),H=n(e," for "),k=i(e,"A",{href:!0});var a=d(k);j=n(a,"test "),z=n(a,Z),a.forEach(c),e.forEach(c),C=p(t),D=i(t,"H4",{style:!0});var l=d(D);L=n(l,"Code"),l.forEach(c),O=p(t),R=i(t,"BUTTON",{});var r=d(R);J=n(r,"restore solution code"),r.forEach(c),K=p(t),et&&et.l(t),M=p(t),P=i(t,"TEXTAREA",{style:!0}),d(P).forEach(c),V=p(t),X=i(t,"DIV",{});var h=d(X);st&&st.l(h),$=p(h),q=i(h,"BUTTON",{disabled:!0});var u=d(q);F=n(u,"update solution"),u.forEach(c),h.forEach(c),this.h()},h(){m(x,"href",A="/solution?id="+t[0].id),m(k,"href",B="/test?id="+t[0].test_code_id),l(D,"margin-top","20px"),l(P,"width","100%"),l(P,"height","200px"),q.disabled=G=0!=S(t[1]).length},m(e,o){r(e,s,o),r(e,y,o),h(y,U),h(y,x),h(x,T),h(x,w),h(y,H),h(y,k),h(k,j),h(k,z),r(e,C,o),r(e,D,o),h(D,L),r(e,O,o),r(e,R,o),h(R,J),r(e,K,o),et&&et.m(e,o),r(e,M,o),r(e,P,o),_(P,t[1]),r(e,V,o),r(e,X,o),st&&st.m(X,null),h(X,$),h(X,q),h(q,F),Q||(W=[v(R,"click",t[3]),v(P,"input",t[5]),v(q,"click",t[4])],Q=!0)},p(t,[s]){1&s&&e!==(e="Updating solution "+t[0].test_code_id)&&(document.title=e),1&s&&Y!==(Y=t[0].id+"")&&u(w,Y),1&s&&A!==(A="/solution?id="+t[0].id)&&m(x,"href",A),1&s&&Z!==(Z=t[0].test_code_id+"")&&u(z,Z),1&s&&B!==(B="/test?id="+t[0].test_code_id)&&m(k,"href",B),t[1]!=t[0].code?et||(et=I(),et.c(),et.m(M.parentNode,M)):et&&(et.d(1),et=null),2&s&&_(P,t[1]),2&s&&(tt=S(t[1]).length>0),tt?st?st.p(t,s):(st=N(t),st.c(),st.m(X,$)):st&&(st.d(1),st=null),2&s&&G!==(G=0!=S(t[1]).length)&&(q.disabled=G)},i:E,o:E,d(t){t&&c(s),t&&c(y),t&&c(C),t&&c(D),t&&c(O),t&&c(R),t&&c(K),et&&et.d(t),t&&c(M),t&&c(P),t&&c(V),t&&c(X),st&&st.d(),Q=!1,b(W)}}}function S(t){return 0==t.length?"code is missing":t.length>8192?`code is too long: ${t.length} > 8192`:""}function j(t,e,s){let o,a=null,i=[];const d=y(localStorage.getItem("uscode")||"");function n(){d.set(i.code)}return U(t,d,t=>s(1,o=t)),d.subscribe(t=>localStorage.setItem("uscode",t)),x(()=>{a=T(),async function(){let t=new URL(location).searchParams.get("id"),e=await w(a,"solution/"+t);s(0,i=e.data),""==o&&n()}()}),[i,o,d,n,async function(){200==(await A(a,"update_solution",{id:i.id,code:o})).status&&(d.set(""),H("/test?id="+i.test_code_id+"&page=0"))},function(){o=this.value,d.set(o)}]}export default class extends t{constructor(t){super(),e(this,t,j,k,s,{})}}
