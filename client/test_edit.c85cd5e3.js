import{S as t,i as e,s,a,F as n,v as i,g as o,d as l,j as c,n as r,G as d,z as u,H as h,C as g,D as p,I as f,J as m,e as v,t as E,c as b,b as y,f as T,w as x,k as I,l as $,L as H,K as S,M as w}from"./client.e38457eb.js";function U(t){let e,s,n,i,r,d,u,h,g,p,f,m,$,U,N,D,C,R,j,z,B,L,O,P,X,F,G=0!=_(t[5],t[6],t[7]).length,J=(t[5]!=t[0].title||t[6]!=t[0].descr||t[7]!=t[0].code)&&k(),K=G&&A(t);return{c(){e=v("button"),s=E("restore original test"),n=a(),J&&J.c(),i=a(),r=v("h4"),d=E("Title"),u=a(),h=v("input"),g=a(),p=v("h4"),f=E("Description"),m=a(),$=v("textarea"),U=a(),N=v("h4"),D=E("Code"),C=a(),R=v("textarea"),j=a(),z=v("div"),K&&K.c(),B=a(),L=v("button"),O=E("update test"),this.h()},l(t){e=b(t,"BUTTON",{});var a=y(e);s=T(a,"restore original test"),a.forEach(o),n=l(t),J&&J.l(t),i=l(t),r=b(t,"H4",{});var c=y(r);d=T(c,"Title"),c.forEach(o),u=l(t),h=b(t,"INPUT",{}),g=l(t),p=b(t,"H4",{style:!0});var v=y(p);f=T(v,"Description"),v.forEach(o),m=l(t),$=b(t,"TEXTAREA",{style:!0}),y($).forEach(o),U=l(t),N=b(t,"H4",{style:!0});var E=y(N);D=T(E,"Code"),E.forEach(o),C=l(t),R=b(t,"TEXTAREA",{style:!0}),y(R).forEach(o),j=l(t),z=b(t,"DIV",{});var x=y(z);K&&K.l(x),B=l(x),L=b(x,"BUTTON",{disabled:!0});var I=y(L);O=T(I,"update test"),I.forEach(o),x.forEach(o),this.h()},h(){x(p,"margin-top","20px"),x($,"width","100%"),x($,"height","200px"),x(N,"margin-top","20px"),x(R,"width","100%"),x(R,"height","200px"),L.disabled=P=0!=_(t[5],t[6],t[7]).length},m(a,o){c(a,e,o),I(e,s),c(a,n,o),J&&J.m(a,o),c(a,i,o),c(a,r,o),I(r,d),c(a,u,o),c(a,h,o),H(h,t[5]),c(a,g,o),c(a,p,o),I(p,f),c(a,m,o),c(a,$,o),H($,t[6]),c(a,U,o),c(a,N,o),I(N,D),c(a,C,o),c(a,R,o),H(R,t[7]),c(a,j,o),c(a,z,o),K&&K.m(z,null),I(z,B),I(z,L),I(L,O),X||(F=[S(e,"click",t[8]),S(h,"input",t[10]),S($,"input",t[11]),S(R,"input",t[12]),S(L,"click",t[9])],X=!0)},p(t,e){t[5]!=t[0].title||t[6]!=t[0].descr||t[7]!=t[0].code?J||(J=k(),J.c(),J.m(i.parentNode,i)):J&&(J.d(1),J=null),32&e&&h.value!==t[5]&&H(h,t[5]),64&e&&H($,t[6]),128&e&&H(R,t[7]),224&e&&(G=0!=_(t[5],t[6],t[7]).length),G?K?K.p(t,e):(K=A(t),K.c(),K.m(z,B)):K&&(K.d(1),K=null),224&e&&P!==(P=0!=_(t[5],t[6],t[7]).length)&&(L.disabled=P)},d(t){t&&o(e),t&&o(n),J&&J.d(t),t&&o(i),t&&o(r),t&&o(u),t&&o(h),t&&o(g),t&&o(p),t&&o(m),t&&o($),t&&o(U),t&&o(N),t&&o(C),t&&o(R),t&&o(j),t&&o(z),K&&K.d(),X=!1,w(F)}}}function N(t){let e,s;return{c(){e=v("h1"),s=E("loading...")},l(t){e=b(t,"H1",{});var a=y(e);s=T(a,"loading..."),a.forEach(o)},m(t,a){c(t,e,a),I(e,s)},p:r,d(t){t&&o(e)}}}function k(t){let e,s;return{c(){e=v("h4"),s=E("modified!"),this.h()},l(t){e=b(t,"H4",{style:!0});var a=y(e);s=T(a,"modified!"),a.forEach(o),this.h()},h(){x(e,"color","red")},m(t,a){c(t,e,a),I(e,s)},d(t){t&&o(e)}}}function A(t){let e,s,a=_(t[5],t[6],t[7])+"";return{c(){e=v("h5"),s=E(a),this.h()},l(t){e=b(t,"H5",{style:!0});var n=y(e);s=T(n,a),n.forEach(o),this.h()},h(){x(e,"margin-top","20px"),x(e,"color","red")},m(t,a){c(t,e,a),I(e,s)},p(t,e){224&e&&a!==(a=_(t[5],t[6],t[7])+"")&&$(s,a)},d(t){t&&o(e)}}}function D(t){let e,s,d;function u(t,e){return t[1]?N:U}document.title=e="Updating test "+t[0].id;let h=u(t),g=h(t);return{c(){s=a(),g.c(),d=n()},l(t){i('[data-svelte="svelte-1it3kzn"]',document.head).forEach(o),s=l(t),g.l(t),d=n()},m(t,e){c(t,s,e),g.m(t,e),c(t,d,e)},p(t,[s]){1&s&&e!==(e="Updating test "+t[0].id)&&(document.title=e),h===(h=u(t))&&g?g.p(t,s):(g.d(1),g=h(t),g&&(g.c(),g.m(d.parentNode,d)))},i:r,o:r,d(t){t&&o(s),g.d(t),t&&o(d)}}}function _(t,e,s){return 0==t.length?"missing title":t.length>256?`title is too long: ${t.length} > 256`:0==e.length?"description is missing":e.length>2048?`description is too long: ${t.length} > 2048`:0==s.length?"code is missing":s.length>8192?`code is too long: ${t.length} > 8192`:""}function C(t,e,s){let a,n,i,o=r,l=()=>(o(),o=d(I,t=>s(5,a=t)),I),c=r,v=()=>(c(),c=d($,t=>s(6,n=t)),$),E=r,b=()=>(E(),E=d(H,t=>s(7,i=t)),H);t.$$.on_destroy.push(()=>o()),t.$$.on_destroy.push(()=>c()),t.$$.on_destroy.push(()=>E());let y=null,T=[],x=!0,I=null;l();let $=null;v();let H=null;function S(){I.set(T.title)}function w(){$.set(T.descr)}function U(){H.set(T.code)}return b(),u(()=>{l(s(2,I=h(localStorage.getItem("utname")||""))),I.subscribe(t=>localStorage.setItem("utname",t)),v(s(3,$=h(localStorage.getItem("utdescr")||""))),$.subscribe(t=>localStorage.setItem("utdescr",t)),b(s(4,H=h(localStorage.getItem("utcode")||""))),H.subscribe(t=>localStorage.setItem("utcode",t)),y=g(),async function(t){s(1,x=!0);let e=new URL(location).searchParams.get("id"),o=await p(y,"test/"+e);s(0,T=o.data),""==a&&S();""==n&&w();""==i&&U();s(1,x=!1)}()}),[T,x,I,$,H,a,n,i,function(){S(),w(),U()},async function(){200==(await f(y,"update_test",{id:T.id,title:a,descr:n,code:i})).status&&(I.set(""),$.set(""),H.set(""),m("/test?id="+T.id+"&page=0"))},function(){a=this.value,I.set(a)},function(){n=this.value,$.set(n)},function(){i=this.value,H.set(i)}]}export default class extends t{constructor(t){super(),e(this,t,C,D,s,{})}}
