import{S as t,i as e,s as o,a as s,F as a,v as i,g as n,d,j as c,n as l,H as r,z as h,C as u,D as f,I as p,J as m,K as g,e as _,t as v,c as E,b as y,f as U,w as b,k as x,G as H,l as T,h as w,L as A,M as N}from"./client.0c722887.js";function k(t){let e,o,a,i,l,r,h,u,f,p,m,g,k,z,j,B,I,L,O,R,F,G,J,K,M,P=t[0].id+"",S=t[0].test_code_id+"",V=D(t[3]).length>0,X=t[3]!=t[0].code&&C(t),q=V&&$(t);return{c(){e=_("h1"),o=v("Updating "),a=_("a"),i=v("solution "),l=v(P),h=v(" for "),u=_("a"),f=v("test "),p=v(S),g=s(),k=_("h4"),z=v("Code"),j=s(),X&&X.c(),B=s(),I=_("textarea"),L=s(),O=_("div"),q&&q.c(),R=s(),F=_("button"),G=v("update solution"),this.h()},l(t){e=E(t,"H1",{});var s=y(e);o=U(s,"Updating "),a=E(s,"A",{href:!0});var c=y(a);i=U(c,"solution "),l=U(c,P),c.forEach(n),h=U(s," for "),u=E(s,"A",{href:!0});var r=y(u);f=U(r,"test "),p=U(r,S),r.forEach(n),s.forEach(n),g=d(t),k=E(t,"H4",{style:!0});var m=y(k);z=U(m,"Code"),m.forEach(n),j=d(t),X&&X.l(t),B=d(t),I=E(t,"TEXTAREA",{style:!0}),y(I).forEach(n),L=d(t),O=E(t,"DIV",{});var _=y(O);q&&q.l(_),R=d(_),F=E(_,"BUTTON",{disabled:!0});var v=y(F);G=U(v,"update solution"),v.forEach(n),_.forEach(n),this.h()},h(){w(a,"href",r="/solution?id="+t[0].id),w(u,"href",m="/test?id="+t[0].test_code_id),b(k,"margin-top","20px"),b(I,"width","100%"),b(I,"height","200px"),F.disabled=J=0!=D(t[3]).length},m(s,n){c(s,e,n),x(e,o),x(e,a),x(a,i),x(a,l),x(e,h),x(e,u),x(u,f),x(u,p),c(s,g,n),c(s,k,n),x(k,z),c(s,j,n),X&&X.m(s,n),c(s,B,n),c(s,I,n),A(I,t[3]),c(s,L,n),c(s,O,n),q&&q.m(O,null),x(O,R),x(O,F),x(F,G),K||(M=[H(I,"input",t[6]),H(F,"click",t[5])],K=!0)},p(t,e){1&e&&P!==(P=t[0].id+"")&&T(l,P),1&e&&r!==(r="/solution?id="+t[0].id)&&w(a,"href",r),1&e&&S!==(S=t[0].test_code_id+"")&&T(p,S),1&e&&m!==(m="/test?id="+t[0].test_code_id)&&w(u,"href",m),t[3]!=t[0].code?X?X.p(t,e):(X=C(t),X.c(),X.m(B.parentNode,B)):X&&(X.d(1),X=null),8&e&&A(I,t[3]),8&e&&(V=D(t[3]).length>0),V?q?q.p(t,e):(q=$(t),q.c(),q.m(O,R)):q&&(q.d(1),q=null),8&e&&J!==(J=0!=D(t[3]).length)&&(F.disabled=J)},d(t){t&&n(e),t&&n(g),t&&n(k),t&&n(j),X&&X.d(t),t&&n(B),t&&n(I),t&&n(L),t&&n(O),q&&q.d(),K=!1,N(M)}}}function z(t){let e,o;return{c(){e=_("h1"),o=v("loading...")},l(t){e=E(t,"H1",{});var s=y(e);o=U(s,"loading..."),s.forEach(n)},m(t,s){c(t,e,s),x(e,o)},p:l,d(t){t&&n(e)}}}function C(t){let e,o,a,i,r,h,u;return{c(){e=_("button"),o=v("restore solution code"),a=s(),i=_("h4"),r=v("modified!"),this.h()},l(t){e=E(t,"BUTTON",{});var s=y(e);o=U(s,"restore solution code"),s.forEach(n),a=d(t),i=E(t,"H4",{style:!0});var c=y(i);r=U(c,"modified!"),c.forEach(n),this.h()},h(){b(i,"color","red")},m(s,n){c(s,e,n),x(e,o),c(s,a,n),c(s,i,n),x(i,r),h||(u=H(e,"click",t[4]),h=!0)},p:l,d(t){t&&n(e),t&&n(a),t&&n(i),h=!1,u()}}}function $(t){let e,o,s=D(t[3])+"";return{c(){e=_("h5"),o=v(s),this.h()},l(t){e=E(t,"H5",{style:!0});var a=y(e);o=U(a,s),a.forEach(n),this.h()},h(){b(e,"margin-top","20px"),b(e,"color","red")},m(t,s){c(t,e,s),x(e,o)},p(t,e){8&e&&s!==(s=D(t[3])+"")&&T(o,s)},d(t){t&&n(e)}}}function j(t){let e,o,r;function h(t,e){return t[1]?z:k}document.title=e="Updating solution "+t[0].test_code_id;let u=h(t),f=u(t);return{c(){o=s(),f.c(),r=a()},l(t){i('[data-svelte="svelte-zysfzi"]',document.head).forEach(n),o=d(t),f.l(t),r=a()},m(t,e){c(t,o,e),f.m(t,e),c(t,r,e)},p(t,[o]){1&o&&e!==(e="Updating solution "+t[0].test_code_id)&&(document.title=e),u===(u=h(t))&&f?f.p(t,o):(f.d(1),f=u(t),f&&(f.c(),f.m(r.parentNode,r)))},i:l,o:l,d(t){t&&n(o),f.d(t),t&&n(r)}}}function B(){return new URL(location).searchParams.get("id")}function D(t){return 0==t.length?"code is missing":t.length>8192?`code is too long: ${t.length} > 8192`:""}function I(t,e,o){let s,a=l,i=()=>(a(),a=r(_,t=>o(3,s=t)),_);t.$$.on_destroy.push(()=>a());let n=null,d=[],c=!0,_=null;function v(){_.set(d.code)}return i(),h(()=>{B();i(o(2,_="")),n=u(),async function(){o(1,c=!0);let t=B(),e=await f(n,"solution/"+t);o(0,d=e.data),""==s&&v();o(1,c=!1)}()}),[d,c,_,s,v,async function(){200==(await p(n,"update_solution",{id:d.id,code:s})).status&&(_.set(""),m(),g("/test?id="+d.test_code_id+"&page=0"))},function(){s=this.value,_.set(s)}]}export default class extends t{constructor(t){super(),e(this,t,I,j,o,{})}}
