import{S as t,i as e,s,e as a,t as l,c as n,b as o,f as i,g as c,w as r,j as h,k as d,l as g,a as u,v as f,d as m,H as p,I as v,n as E,J as b,K as x,L as I,A as T,D as y,M as S,N as w}from"./client.0a4ecb5f.js";function A(t){let e,s,u=j(t[0],t[1],t[2])+"";return{c(){e=a("h5"),s=l(u),this.h()},l(t){e=n(t,"H5",{style:!0});var a=o(e);s=i(a,u),a.forEach(c),this.h()},h(){r(e,"margin-top","20px"),r(e,"color","red")},m(t,a){h(t,e,a),d(e,s)},p(t,e){7&e&&u!==(u=j(t[0],t[1],t[2])+"")&&g(s,u)},d(t){t&&c(e)}}}function H(t){let e,s,g,x,I,T,y,S,w,H,D,N,$,k,C,R,U,X,B,J,K,L,M,O=0!=j(t[0],t[1],t[2]).length,P=O&&A(t);return{c(){e=u(),s=a("h4"),g=l("Title"),x=u(),I=a("input"),T=u(),y=a("h4"),S=l("Description"),w=u(),H=a("textarea"),D=u(),N=a("h4"),$=l("Code"),k=u(),C=a("textarea"),R=u(),U=a("div"),P&&P.c(),X=u(),B=a("button"),J=l("add test"),this.h()},l(t){f('[data-svelte="svelte-efjyjy"]',document.head).forEach(c),e=m(t),s=n(t,"H4",{});var a=o(s);g=i(a,"Title"),a.forEach(c),x=m(t),I=n(t,"INPUT",{}),T=m(t),y=n(t,"H4",{style:!0});var l=o(y);S=i(l,"Description"),l.forEach(c),w=m(t),H=n(t,"TEXTAREA",{style:!0}),o(H).forEach(c),D=m(t),N=n(t,"H4",{style:!0});var r=o(N);$=i(r,"Code"),r.forEach(c),k=m(t),C=n(t,"TEXTAREA",{style:!0}),o(C).forEach(c),R=m(t),U=n(t,"DIV",{});var h=o(U);P&&P.l(h),X=m(h),B=n(h,"BUTTON",{disabled:!0});var d=o(B);J=i(d,"add test"),d.forEach(c),h.forEach(c),this.h()},h(){document.title="New test",r(y,"margin-top","20px"),r(H,"width","100%"),r(H,"height","200px"),r(N,"margin-top","20px"),r(C,"width","100%"),r(C,"height","200px"),B.disabled=K=0!=j(t[0],t[1],t[2]).length},m(a,l){h(a,e,l),h(a,s,l),d(s,g),h(a,x,l),h(a,I,l),p(I,t[0]),h(a,T,l),h(a,y,l),d(y,S),h(a,w,l),h(a,H,l),p(H,t[1]),h(a,D,l),h(a,N,l),d(N,$),h(a,k,l),h(a,C,l),p(C,t[2]),h(a,R,l),h(a,U,l),P&&P.m(U,null),d(U,X),d(U,B),d(B,J),L||(M=[v(I,"input",t[7]),v(H,"input",t[8]),v(C,"input",t[9]),v(B,"click",t[6])],L=!0)},p(t,[e]){1&e&&I.value!==t[0]&&p(I,t[0]),2&e&&p(H,t[1]),4&e&&p(C,t[2]),7&e&&(O=0!=j(t[0],t[1],t[2]).length),O?P?P.p(t,e):(P=A(t),P.c(),P.m(U,X)):P&&(P.d(1),P=null),7&e&&K!==(K=0!=j(t[0],t[1],t[2]).length)&&(B.disabled=K)},i:E,o:E,d(t){t&&c(e),t&&c(s),t&&c(x),t&&c(I),t&&c(T),t&&c(y),t&&c(w),t&&c(H),t&&c(D),t&&c(N),t&&c(k),t&&c(C),t&&c(R),t&&c(U),P&&P.d(),L=!1,b(M)}}}function j(t,e,s){return 0==t.length?"missing title":t.length>256?`title is too long: ${t.length} > 256`:0==e.length?"description is missing":e.length>2048?`description is too long: ${t.length} > 2048`:0==s.length?"code is missing":s.length>8192?`code is too long: ${t.length} > 8192`:""}function D(t,e,s){let a,l,n,o=null;const i=x(localStorage.getItem("tname")||"");I(t,i,t=>s(0,a=t)),i.subscribe(t=>localStorage.setItem("tname",t));const c=x(localStorage.getItem("tdescr")||"");I(t,c,t=>s(1,l=t)),c.subscribe(t=>localStorage.setItem("tdescr",t));const r=x(localStorage.getItem("tcode")||"");return I(t,r,t=>s(2,n=t)),r.subscribe(t=>localStorage.setItem("tcode",t)),T(()=>{o=y()}),[a,l,n,i,c,r,async function(){200==(await S(o,"create_test",{title:a,descr:l,code:n})).status&&(i.set(""),c.set(""),r.set(""),w("/"))},function(){a=this.value,i.set(a)},function(){l=this.value,c.set(l)},function(){n=this.value,r.set(n)}]}export default class extends t{constructor(t){super(),e(this,t,D,H,s,{})}}
