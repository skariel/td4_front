import{S as t,i as e,s,e as a,t as l,c as n,b as o,f as i,g as c,w as r,j as h,k as d,l as g,a as u,v as f,d as m,M as p,L as v,n as E,N as b,H as x,O as I,z as T,C as y,I as S,J as w,K as H}from"./client.5731df6b.js";function j(t){let e,s,u=N(t[0],t[1],t[2])+"";return{c(){e=a("h5"),s=l(u),this.h()},l(t){e=n(t,"H5",{style:!0});var a=o(e);s=i(a,u),a.forEach(c),this.h()},h(){r(e,"margin-top","20px"),r(e,"color","red")},m(t,a){h(t,e,a),d(e,s)},p(t,e){7&e&&u!==(u=N(t[0],t[1],t[2])+"")&&g(s,u)},d(t){t&&c(e)}}}function A(t){let e,s,g,x,I,T,y,S,w,H,A,C,D,$,k,O,R,U,X,z,B,J,K,L=0!=N(t[0],t[1],t[2]).length,M=L&&j(t);return{c(){e=u(),s=a("h4"),g=l("Title"),x=u(),I=a("input"),T=u(),y=a("h4"),S=l("Description"),w=u(),H=a("textarea"),A=u(),C=a("h4"),D=l("Code"),$=u(),k=a("textarea"),O=u(),R=a("div"),M&&M.c(),U=u(),X=a("button"),z=l("add test"),this.h()},l(t){f('[data-svelte="svelte-efjyjy"]',document.head).forEach(c),e=m(t),s=n(t,"H4",{});var a=o(s);g=i(a,"Title"),a.forEach(c),x=m(t),I=n(t,"INPUT",{}),T=m(t),y=n(t,"H4",{style:!0});var l=o(y);S=i(l,"Description"),l.forEach(c),w=m(t),H=n(t,"TEXTAREA",{style:!0}),o(H).forEach(c),A=m(t),C=n(t,"H4",{style:!0});var r=o(C);D=i(r,"Code"),r.forEach(c),$=m(t),k=n(t,"TEXTAREA",{style:!0}),o(k).forEach(c),O=m(t),R=n(t,"DIV",{});var h=o(R);M&&M.l(h),U=m(h),X=n(h,"BUTTON",{disabled:!0});var d=o(X);z=i(d,"add test"),d.forEach(c),h.forEach(c),this.h()},h(){document.title="New test",r(y,"margin-top","20px"),r(H,"width","100%"),r(H,"height","200px"),r(C,"margin-top","20px"),r(k,"width","100%"),r(k,"height","200px"),X.disabled=B=0!=N(t[0],t[1],t[2]).length},m(a,l){h(a,e,l),h(a,s,l),d(s,g),h(a,x,l),h(a,I,l),p(I,t[0]),h(a,T,l),h(a,y,l),d(y,S),h(a,w,l),h(a,H,l),p(H,t[1]),h(a,A,l),h(a,C,l),d(C,D),h(a,$,l),h(a,k,l),p(k,t[2]),h(a,O,l),h(a,R,l),M&&M.m(R,null),d(R,U),d(R,X),d(X,z),J||(K=[v(I,"input",t[7]),v(H,"input",t[8]),v(k,"input",t[9]),v(X,"click",t[6])],J=!0)},p(t,[e]){1&e&&I.value!==t[0]&&p(I,t[0]),2&e&&p(H,t[1]),4&e&&p(k,t[2]),7&e&&(L=0!=N(t[0],t[1],t[2]).length),L?M?M.p(t,e):(M=j(t),M.c(),M.m(R,U)):M&&(M.d(1),M=null),7&e&&B!==(B=0!=N(t[0],t[1],t[2]).length)&&(X.disabled=B)},i:E,o:E,d(t){t&&c(e),t&&c(s),t&&c(x),t&&c(I),t&&c(T),t&&c(y),t&&c(w),t&&c(H),t&&c(A),t&&c(C),t&&c($),t&&c(k),t&&c(O),t&&c(R),M&&M.d(),J=!1,b(K)}}}function N(t,e,s){return 0==t.length?"missing title":t.length>256?`title is too long: ${t.length} > 256`:0==e.length?"description is missing":e.length>2048?`description is too long: ${t.length} > 2048`:0==s.length?"code is missing":s.length>8192?`code is too long: ${t.length} > 8192`:""}function C(t,e,s){let a,l,n,o=null;const i=x(localStorage.getItem("tname")||"");I(t,i,t=>s(0,a=t)),i.subscribe(t=>localStorage.setItem("tname",t));const c=x(localStorage.getItem("tdescr")||"");I(t,c,t=>s(1,l=t)),c.subscribe(t=>localStorage.setItem("tdescr",t));const r=x(localStorage.getItem("tcode")||"");return I(t,r,t=>s(2,n=t)),r.subscribe(t=>localStorage.setItem("tcode",t)),T(()=>{o=y()}),[a,l,n,i,c,r,async function(){200==(await S(o,"create_test",{title:a,descr:l,code:n})).status&&(i.set(""),c.set(""),r.set(""),w(),H("/"))},function(){a=this.value,i.set(a)},function(){l=this.value,c.set(l)},function(){n=this.value,r.set(n)}]}export default class extends t{constructor(t){super(),e(this,t,C,A,s,{})}}
