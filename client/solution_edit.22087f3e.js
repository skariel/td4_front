import{S as t,i as e,s,e as o,t as a,c as i,b as d,f as n,g as c,w as l,j as r,k as h,l as u,a as f,v as g,d as p,h as m,G as _,H as v,n as E,I as b,J as y,K as U,z as x,C as T,D as w,L as H,M as A}from"./client.c77e44e9.js";function I(t){let e,s;return{c(){e=o("h4"),s=a("modified!"),this.h()},l(t){e=i(t,"H4",{style:!0});var o=d(e);s=n(o,"modified!"),o.forEach(c),this.h()},h(){l(e,"color","red")},m(t,o){r(t,e,o),h(e,s)},d(t){t&&c(e)}}}function k(t){let e,s,f=C(t[1])+"";return{c(){e=o("h5"),s=a(f),this.h()},l(t){e=i(t,"H5",{style:!0});var o=d(e);s=n(o,f),o.forEach(c),this.h()},h(){l(e,"margin-top","20px"),l(e,"color","red")},m(t,o){r(t,e,o),h(e,s)},p(t,e){2&e&&f!==(f=C(t[1])+"")&&u(s,f)},d(t){t&&c(e)}}}function z(t){let e,s,y,U,x,T,w,H,A,z,N,S,j,B,D,L,O,R,G,J,K,M,P,V,X,$,q,F,Q,W,Y=t[0].id+"",Z=t[0].test_code_id+"",tt=C(t[1]).length>0;document.title=e="Updating solution "+t[0].test_code_id;let et=t[1]!=t[0].code&&I(),st=tt&&k(t);return{c(){s=f(),y=o("h1"),U=a("Updating "),x=o("a"),T=a("solution "),w=a(Y),A=a(" for "),z=o("a"),N=a("test "),S=a(Z),B=f(),D=o("h4"),L=a("Code"),O=f(),R=o("button"),G=a("restore solution code"),J=f(),et&&et.c(),K=f(),M=o("textarea"),P=f(),V=o("div"),st&&st.c(),X=f(),$=o("button"),q=a("update solution"),this.h()},l(t){g('[data-svelte="svelte-zysfzi"]',document.head).forEach(c),s=p(t),y=i(t,"H1",{});var e=d(y);U=n(e,"Updating "),x=i(e,"A",{href:!0});var o=d(x);T=n(o,"solution "),w=n(o,Y),o.forEach(c),A=n(e," for "),z=i(e,"A",{href:!0});var a=d(z);N=n(a,"test "),S=n(a,Z),a.forEach(c),e.forEach(c),B=p(t),D=i(t,"H4",{style:!0});var l=d(D);L=n(l,"Code"),l.forEach(c),O=p(t),R=i(t,"BUTTON",{});var r=d(R);G=n(r,"restore solution code"),r.forEach(c),J=p(t),et&&et.l(t),K=p(t),M=i(t,"TEXTAREA",{style:!0}),d(M).forEach(c),P=p(t),V=i(t,"DIV",{});var h=d(V);st&&st.l(h),X=p(h),$=i(h,"BUTTON",{disabled:!0});var u=d($);q=n(u,"update solution"),u.forEach(c),h.forEach(c),this.h()},h(){m(x,"href",H="/solution?id="+t[0].id),m(z,"href",j="/test?id="+t[0].test_code_id),l(D,"margin-top","20px"),l(M,"width","100%"),l(M,"height","200px"),$.disabled=F=0!=C(t[1]).length},m(e,o){r(e,s,o),r(e,y,o),h(y,U),h(y,x),h(x,T),h(x,w),h(y,A),h(y,z),h(z,N),h(z,S),r(e,B,o),r(e,D,o),h(D,L),r(e,O,o),r(e,R,o),h(R,G),r(e,J,o),et&&et.m(e,o),r(e,K,o),r(e,M,o),_(M,t[1]),r(e,P,o),r(e,V,o),st&&st.m(V,null),h(V,X),h(V,$),h($,q),Q||(W=[v(R,"click",t[3]),v(M,"input",t[5]),v($,"click",t[4])],Q=!0)},p(t,[s]){1&s&&e!==(e="Updating solution "+t[0].test_code_id)&&(document.title=e),1&s&&Y!==(Y=t[0].id+"")&&u(w,Y),1&s&&H!==(H="/solution?id="+t[0].id)&&m(x,"href",H),1&s&&Z!==(Z=t[0].test_code_id+"")&&u(S,Z),1&s&&j!==(j="/test?id="+t[0].test_code_id)&&m(z,"href",j),t[1]!=t[0].code?et||(et=I(),et.c(),et.m(K.parentNode,K)):et&&(et.d(1),et=null),2&s&&_(M,t[1]),2&s&&(tt=C(t[1]).length>0),tt?st?st.p(t,s):(st=k(t),st.c(),st.m(V,X)):st&&(st.d(1),st=null),2&s&&F!==(F=0!=C(t[1]).length)&&($.disabled=F)},i:E,o:E,d(t){t&&c(s),t&&c(y),t&&c(B),t&&c(D),t&&c(O),t&&c(R),t&&c(J),et&&et.d(t),t&&c(K),t&&c(M),t&&c(P),t&&c(V),st&&st.d(),Q=!1,b(W)}}}function C(t){return 0==t.length?"code is missing":t.length>8192?`code is too long: ${t.length} > 8192`:""}function N(t,e,s){let o,a=null,i=[];const d=y(localStorage.getItem("uscode")||"");function n(){d.set(i.code)}return U(t,d,t=>s(1,o=t)),d.subscribe(t=>localStorage.setItem("uscode",t)),x(()=>{a=T(),async function(){let t=new URL(location).searchParams.get("id"),e=await w(a,"solution/"+t);s(0,i=e.data),""==o&&n()}()}),[i,o,d,n,async function(){200==(await H(a,"update_solution",{id:i.id,code:o})).status&&(d.set(""),A("/test?id="+i.test_code_id+"&page=0"))},function(){o=this.value,d.set(o)}]}export default class extends t{constructor(t){super(),e(this,t,N,z,s,{})}}
