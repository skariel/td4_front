import{S as t,i as e,s,a,G as n,x as i,g as o,d as l,k as c,n as r,I as d,A as u,J as h,D as g,E as p,K as f,L as m,M as E,e as v,t as b,c as y,b as T,f as x,j as _,l as I,H as $,m as H,N as S,O as N}from"./client.87351f6c.js";function U(t){let e,s,n,i,r,d,u,h,g,p,f,m,E,H,U,w,D,O,j,B,C,L,P,X=0!=R(t[5],t[6],t[7]).length,z=(t[5]!=t[0].title||t[6]!=t[0].descr||t[7]!=t[0].code)&&A(t),G=X&&k(t);return{c(){z&&z.c(),e=a(),s=v("h4"),n=b("Title"),i=a(),r=v("input"),d=a(),u=v("h4"),h=b("Description"),g=a(),p=v("textarea"),f=a(),m=v("h4"),E=b("Code"),H=a(),U=v("textarea"),w=a(),D=v("div"),G&&G.c(),O=a(),j=v("button"),B=b("update test"),this.h()},l(t){z&&z.l(t),e=l(t),s=y(t,"H4",{});var a=T(s);n=x(a,"Title"),a.forEach(o),i=l(t),r=y(t,"INPUT",{}),d=l(t),u=y(t,"H4",{style:!0});var c=T(u);h=x(c,"Description"),c.forEach(o),g=l(t),p=y(t,"TEXTAREA",{style:!0}),T(p).forEach(o),f=l(t),m=y(t,"H4",{style:!0});var v=T(m);E=x(v,"Code"),v.forEach(o),H=l(t),U=y(t,"TEXTAREA",{style:!0}),T(U).forEach(o),w=l(t),D=y(t,"DIV",{});var b=T(D);G&&G.l(b),O=l(b),j=y(b,"BUTTON",{disabled:!0});var _=T(j);B=x(_,"update test"),_.forEach(o),b.forEach(o),this.h()},h(){_(u,"margin-top","20px"),_(p,"width","100%"),_(p,"height","200px"),_(m,"margin-top","20px"),_(U,"width","100%"),_(U,"height","200px"),j.disabled=C=0!=R(t[5],t[6],t[7]).length},m(a,o){z&&z.m(a,o),c(a,e,o),c(a,s,o),I(s,n),c(a,i,o),c(a,r,o),S(r,t[5]),c(a,d,o),c(a,u,o),I(u,h),c(a,g,o),c(a,p,o),S(p,t[6]),c(a,f,o),c(a,m,o),I(m,E),c(a,H,o),c(a,U,o),S(U,t[7]),c(a,w,o),c(a,D,o),G&&G.m(D,null),I(D,O),I(D,j),I(j,B),L||(P=[$(r,"input",t[10]),$(p,"input",t[11]),$(U,"input",t[12]),$(j,"click",t[9])],L=!0)},p(t,s){t[5]!=t[0].title||t[6]!=t[0].descr||t[7]!=t[0].code?z?z.p(t,s):(z=A(t),z.c(),z.m(e.parentNode,e)):z&&(z.d(1),z=null),32&s&&r.value!==t[5]&&S(r,t[5]),64&s&&S(p,t[6]),128&s&&S(U,t[7]),224&s&&(X=0!=R(t[5],t[6],t[7]).length),X?G?G.p(t,s):(G=k(t),G.c(),G.m(D,O)):G&&(G.d(1),G=null),224&s&&C!==(C=0!=R(t[5],t[6],t[7]).length)&&(j.disabled=C)},d(t){z&&z.d(t),t&&o(e),t&&o(s),t&&o(i),t&&o(r),t&&o(d),t&&o(u),t&&o(g),t&&o(p),t&&o(f),t&&o(m),t&&o(H),t&&o(U),t&&o(w),t&&o(D),G&&G.d(),L=!1,N(P)}}}function w(t){let e,s;return{c(){e=v("h1"),s=b("loading...")},l(t){e=y(t,"H1",{});var a=T(e);s=x(a,"loading..."),a.forEach(o)},m(t,a){c(t,e,a),I(e,s)},p:r,d(t){t&&o(e)}}}function A(t){let e,s,n,i,d,u,h;return{c(){e=v("button"),s=b("restore original test"),n=a(),i=v("h4"),d=b("modified!"),this.h()},l(t){e=y(t,"BUTTON",{});var a=T(e);s=x(a,"restore original test"),a.forEach(o),n=l(t),i=y(t,"H4",{style:!0});var c=T(i);d=x(c,"modified!"),c.forEach(o),this.h()},h(){_(i,"color","red")},m(a,o){c(a,e,o),I(e,s),c(a,n,o),c(a,i,o),I(i,d),u||(h=$(e,"click",t[8]),u=!0)},p:r,d(t){t&&o(e),t&&o(n),t&&o(i),u=!1,h()}}}function k(t){let e,s,a=R(t[5],t[6],t[7])+"";return{c(){e=v("h5"),s=b(a),this.h()},l(t){e=y(t,"H5",{style:!0});var n=T(e);s=x(n,a),n.forEach(o),this.h()},h(){_(e,"margin-top","20px"),_(e,"color","red")},m(t,a){c(t,e,a),I(e,s)},p(t,e){224&e&&a!==(a=R(t[5],t[6],t[7])+"")&&H(s,a)},d(t){t&&o(e)}}}function D(t){let e,s,d;function u(t,e){return t[1]?w:U}document.title=e="Updating test "+t[0].id;let h=u(t),g=h(t);return{c(){s=a(),g.c(),d=n()},l(t){i('[data-svelte="svelte-1it3kzn"]',document.head).forEach(o),s=l(t),g.l(t),d=n()},m(t,e){c(t,s,e),g.m(t,e),c(t,d,e)},p(t,[s]){1&s&&e!==(e="Updating test "+t[0].id)&&(document.title=e),h===(h=u(t))&&g?g.p(t,s):(g.d(1),g=h(t),g&&(g.c(),g.m(d.parentNode,d)))},i:r,o:r,d(t){t&&o(s),g.d(t),t&&o(d)}}}function O(){return new URL(location).searchParams.get("id")}function R(t,e,s){return 0==t.length?"missing title":t.length>256?`title is too long: ${t.length} > 256`:0==e.length?"description is missing":e.length>2048?`description is too long: ${t.length} > 2048`:0==s.length?"code is missing":s.length>8192?`code is too long: ${t.length} > 8192`:""}function j(t,e,s){let a,n,i,o=r,l=()=>(o(),o=d(I,t=>s(5,a=t)),I),c=r,v=()=>(c(),c=d($,t=>s(6,n=t)),$),b=r,y=()=>(b(),b=d(H,t=>s(7,i=t)),H);t.$$.on_destroy.push(()=>o()),t.$$.on_destroy.push(()=>c()),t.$$.on_destroy.push(()=>b());let T=null,x=[],_=!0,I=null;l();let $=null;v();let H=null;function S(){I.set(x.title)}function N(){$.set(x.descr)}function U(){H.set(x.code)}return y(),u(()=>{let t=O();l(s(2,I=h(localStorage.getItem("utname_"+t)||""))),I.subscribe(e=>localStorage.setItem("utname_"+t,e)),v(s(3,$=h(localStorage.getItem("utdescr_"+t)||""))),$.subscribe(e=>localStorage.setItem("utdescr_"+t,e)),y(s(4,H=h(localStorage.getItem("utcode_"+t)||""))),H.subscribe(e=>localStorage.setItem("utcode_"+t,e)),T=g(),async function(t){s(1,_=!0);let e=O(),o=await p(T,"test/"+e);s(0,x=o.data),""==a&&S();""==n&&N();""==i&&U();s(1,_=!1)}()}),[x,_,I,$,H,a,n,i,function(){S(),N(),U()},async function(){200==(await f(T,"update_test",{id:x.id,title:a,descr:n,code:i})).status&&(I.set(""),$.set(""),H.set(""),m(),E("/test?id="+x.id+"&page=0"))},function(){a=this.value,I.set(a)},function(){n=this.value,$.set(n)},function(){i=this.value,H.set(i)}]}export default class extends t{constructor(t){super(),e(this,t,j,D,s,{})}}
