import{S as t,i as e,s as o,a as s,F as a,v as i,g as n,d,j as c,n as l,H as r,z as u,I as h,C as f,D as p,J as g,K as m,L as _,e as v,t as E,c as b,b as y,f as U,w as x,k as H,G as T,l as w,h as N,M as A,N as I}from"./client.9272cf57.js";function k(t){let e,o,a,i,l,r,u,h,f,p,g,m,_,k,z,$,j,D,L,O,R,F,G,J,K,M=t[0].id+"",P=t[0].test_code_id+"",V=B(t[3]).length>0,X=t[3]!=t[0].code&&C(t),q=V&&S(t);return{c(){e=v("h1"),o=E("Updating "),a=v("a"),i=E("solution "),l=E(M),u=E(" for "),h=v("a"),f=E("test "),p=E(P),m=s(),_=v("h4"),k=E("Code"),z=s(),X&&X.c(),$=s(),j=v("textarea"),D=s(),L=v("div"),q&&q.c(),O=s(),R=v("button"),F=E("update solution"),this.h()},l(t){e=b(t,"H1",{});var s=y(e);o=U(s,"Updating "),a=b(s,"A",{href:!0});var c=y(a);i=U(c,"solution "),l=U(c,M),c.forEach(n),u=U(s," for "),h=b(s,"A",{href:!0});var r=y(h);f=U(r,"test "),p=U(r,P),r.forEach(n),s.forEach(n),m=d(t),_=b(t,"H4",{style:!0});var g=y(_);k=U(g,"Code"),g.forEach(n),z=d(t),X&&X.l(t),$=d(t),j=b(t,"TEXTAREA",{style:!0}),y(j).forEach(n),D=d(t),L=b(t,"DIV",{});var v=y(L);q&&q.l(v),O=d(v),R=b(v,"BUTTON",{disabled:!0});var E=y(R);F=U(E,"update solution"),E.forEach(n),v.forEach(n),this.h()},h(){N(a,"href",r="/solution?id="+t[0].id),N(h,"href",g="/test?id="+t[0].test_code_id),x(_,"margin-top","20px"),x(j,"width","100%"),x(j,"height","200px"),R.disabled=G=0!=B(t[3]).length},m(s,n){c(s,e,n),H(e,o),H(e,a),H(a,i),H(a,l),H(e,u),H(e,h),H(h,f),H(h,p),c(s,m,n),c(s,_,n),H(_,k),c(s,z,n),X&&X.m(s,n),c(s,$,n),c(s,j,n),A(j,t[3]),c(s,D,n),c(s,L,n),q&&q.m(L,null),H(L,O),H(L,R),H(R,F),J||(K=[T(j,"input",t[6]),T(R,"click",t[5])],J=!0)},p(t,e){1&e&&M!==(M=t[0].id+"")&&w(l,M),1&e&&r!==(r="/solution?id="+t[0].id)&&N(a,"href",r),1&e&&P!==(P=t[0].test_code_id+"")&&w(p,P),1&e&&g!==(g="/test?id="+t[0].test_code_id)&&N(h,"href",g),t[3]!=t[0].code?X?X.p(t,e):(X=C(t),X.c(),X.m($.parentNode,$)):X&&(X.d(1),X=null),8&e&&A(j,t[3]),8&e&&(V=B(t[3]).length>0),V?q?q.p(t,e):(q=S(t),q.c(),q.m(L,O)):q&&(q.d(1),q=null),8&e&&G!==(G=0!=B(t[3]).length)&&(R.disabled=G)},d(t){t&&n(e),t&&n(m),t&&n(_),t&&n(z),X&&X.d(t),t&&n($),t&&n(j),t&&n(D),t&&n(L),q&&q.d(),J=!1,I(K)}}}function z(t){let e,o;return{c(){e=v("h1"),o=E("loading...")},l(t){e=b(t,"H1",{});var s=y(e);o=U(s,"loading..."),s.forEach(n)},m(t,s){c(t,e,s),H(e,o)},p:l,d(t){t&&n(e)}}}function C(t){let e,o,a,i,r,u,h;return{c(){e=v("button"),o=E("restore solution code"),a=s(),i=v("h4"),r=E("modified!"),this.h()},l(t){e=b(t,"BUTTON",{});var s=y(e);o=U(s,"restore solution code"),s.forEach(n),a=d(t),i=b(t,"H4",{style:!0});var c=y(i);r=U(c,"modified!"),c.forEach(n),this.h()},h(){x(i,"color","red")},m(s,n){c(s,e,n),H(e,o),c(s,a,n),c(s,i,n),H(i,r),u||(h=T(e,"click",t[4]),u=!0)},p:l,d(t){t&&n(e),t&&n(a),t&&n(i),u=!1,h()}}}function S(t){let e,o,s=B(t[3])+"";return{c(){e=v("h5"),o=E(s),this.h()},l(t){e=b(t,"H5",{style:!0});var a=y(e);o=U(a,s),a.forEach(n),this.h()},h(){x(e,"margin-top","20px"),x(e,"color","red")},m(t,s){c(t,e,s),H(e,o)},p(t,e){8&e&&s!==(s=B(t[3])+"")&&w(o,s)},d(t){t&&n(e)}}}function $(t){let e,o,r;function u(t,e){return t[1]?z:k}document.title=e="Updating solution "+t[0].test_code_id;let h=u(t),f=h(t);return{c(){o=s(),f.c(),r=a()},l(t){i('[data-svelte="svelte-zysfzi"]',document.head).forEach(n),o=d(t),f.l(t),r=a()},m(t,e){c(t,o,e),f.m(t,e),c(t,r,e)},p(t,[o]){1&o&&e!==(e="Updating solution "+t[0].test_code_id)&&(document.title=e),h===(h=u(t))&&f?f.p(t,o):(f.d(1),f=h(t),f&&(f.c(),f.m(r.parentNode,r)))},i:l,o:l,d(t){t&&n(o),f.d(t),t&&n(r)}}}function j(){return new URL(location).searchParams.get("id")}function B(t){return 0==t.length?"code is missing":t.length>8192?`code is too long: ${t.length} > 8192`:""}function D(t,e,o){let s,a=l,i=()=>(a(),a=r(v,t=>o(3,s=t)),v);t.$$.on_destroy.push(()=>a());let n=null,d=[],c=!0,v=null;function E(){v.set(d.code)}return i(),u(()=>{let t=j();i(o(2,v=h(localStorage.getItem("uscode"+t)||""))),v.subscribe(e=>localStorage.setItem("uscode"+t,e)),n=f(),async function(){o(1,c=!0);let t=j(),e=await p(n,"solution/"+t);o(0,d=e.data),""==s&&E();o(1,c=!1)}()}),[d,c,v,s,E,async function(){200==(await g(n,"update_solution",{id:d.id,code:s})).status&&(v.set(""),m(),_("/test?id="+d.test_code_id+"&page=0"))},function(){s=this.value,v.set(s)}]}export default class extends t{constructor(t){super(),e(this,t,D,$,o,{})}}
